!function(){"use strict";var t=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},e=function(e){return Object(t(e))},n={}.hasOwnProperty,i=function(t,e){return n.call(t,e)},o={}.toString,a=function(t){return o.call(t).slice(8,-1)},r=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==a(t)?t.split(""):Object(t)},s=function(e){return r(t(e))},p=Math.ceil,c=Math.floor,l=function(t){return isNaN(t=+t)?0:(t>0?c:p)(t)},h=Math.min,f=function(t){return t>0?h(l(t),9007199254740991):0},u=Math.max,x=Math.min,d="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function g(t,e){return t(e={exports:{}},e.exports),e.exports}var _,m=g((function(t){var e=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)})),b=(m.version,g((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}))),v=g((function(t){var e=b["__core-js_shared__"]||(b["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:m.version,mode:"pure",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})})),k=0,y=Math.random(),w=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++k+y).toString(36))},E=v("keys"),C=function(t){return E[t]||(E[t]=w(t))},S=(_=!1,function(t,e,n){var i,o=s(t),a=f(o.length),r=function(t,e){return(t=l(t))<0?u(t+e,0):x(t,e)}(n,a);if(_&&e!=e){for(;a>r;)if((i=o[r++])!=i)return!0}else for(;a>r;r++)if((_||r in o)&&o[r]===e)return _||r||0;return!_&&-1}),P=C("IE_PROTO"),T=function(t,e){var n,o=s(t),a=0,r=[];for(n in o)n!=P&&i(o,n)&&r.push(n);for(;e.length>a;)i(o,n=e[a++])&&(~S(r,n)||r.push(n));return r},M="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),A=Object.keys||function(t){return T(t,M)},B=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},N=function(t,e,n){if(B(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}},O=function(t){return"object"==typeof t?null!==t:"function"==typeof t},j=function(t){if(!O(t))throw TypeError(t+" is not an object!");return t},L=function(t){try{return!!t()}catch(t){return!0}},I=!L((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),H=b.document,z=O(H)&&O(H.createElement),F=function(t){return z?H.createElement(t):{}},R=!I&&!L((function(){return 7!=Object.defineProperty(F("div"),"a",{get:function(){return 7}}).a})),D=function(t,e){if(!O(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!O(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!O(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!O(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},Y=Object.defineProperty,W={f:I?Object.defineProperty:function(t,e,n){if(j(t),e=D(e,!0),j(n),R)try{return Y(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},G=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},U=I?function(t,e,n){return W.f(t,e,G(1,n))}:function(t,e,n){return t[e]=n,t},q=function(t,e,n){var o,a,r,s=t&q.F,p=t&q.G,c=t&q.S,l=t&q.P,h=t&q.B,f=t&q.W,u=p?m:m[e]||(m[e]={}),x=u.prototype,d=p?b:c?b[e]:(b[e]||{}).prototype;for(o in p&&(n=e),n)(a=!s&&d&&void 0!==d[o])&&i(u,o)||(r=a?d[o]:n[o],u[o]=p&&"function"!=typeof d[o]?n[o]:h&&a?N(r,b):f&&d[o]==r?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(r):l&&"function"==typeof r?N(Function.call,r):r,l&&((u.virtual||(u.virtual={}))[o]=r,t&q.R&&x&&!x[o]&&U(x,o,r)))};q.F=1,q.G=2,q.S=4,q.P=8,q.B=16,q.W=32,q.U=64,q.R=128;var V=q,$=function(t,e){var n=(m.Object||{})[t]||Object[t],i={};i[t]=e(n),V(V.S+V.F*L((function(){n(1)})),"Object",i)};$("keys",(function(){return function(t){return A(e(t))}}));var K=m.Object.keys;var Z=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};V(V.S+V.F*!I,"Object",{defineProperty:W.f});var J=m.Object,X=function(t,e,n){return J.defineProperty(t,e,n)};function Q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),X(t,i.key,i)}}var tt=function(t,e,n){return e&&Q(t.prototype,e),n&&Q(t,n),t},et=U,nt={},it=I?Object.defineProperties:function(t,e){j(t);for(var n,i=A(e),o=i.length,a=0;o>a;)W.f(t,n=i[a++],e[n]);return t},ot=b.document,at=ot&&ot.documentElement,rt=C("IE_PROTO"),st=function(){},pt=function(){var t,e=F("iframe"),n=M.length;for(e.style.display="none",at.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),pt=t.F;n--;)delete pt.prototype[M[n]];return pt()},ct=Object.create||function(t,e){var n;return null!==t?(st.prototype=j(t),n=new st,st.prototype=null,n[rt]=t):n=pt(),void 0===e?n:it(n,e)},lt=g((function(t){var e=v("wks"),n=b.Symbol,i="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:w)("Symbol."+t))}).store=e})),ht=W.f,ft=lt("toStringTag"),ut=function(t,e,n){t&&!i(t=n?t:t.prototype,ft)&&ht(t,ft,{configurable:!0,value:e})},xt={};U(xt,lt("iterator"),(function(){return this}));var dt=C("IE_PROTO"),gt=Object.prototype,_t=Object.getPrototypeOf||function(t){return t=e(t),i(t,dt)?t[dt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?gt:null},mt=lt("iterator"),bt=!([].keys&&"next"in[].keys()),vt=function(){return this},kt=function(t,e,n,i,o,a,r){!function(t,e,n){t.prototype=ct(xt,{next:G(1,n)}),ut(t,e+" Iterator")}(n,e,i);var s,p,c,l=function(t){if(!bt&&t in x)return x[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",f="values"==o,u=!1,x=t.prototype,d=x[mt]||x["@@iterator"]||o&&x[o],g=d||l(o),_=o?f?l("entries"):g:void 0,m="Array"==e&&x.entries||d;if(m&&(c=_t(m.call(new t)))!==Object.prototype&&c.next&&ut(c,h,!0),f&&d&&"values"!==d.name&&(u=!0,g=function(){return d.call(this)}),!r||!bt&&!u&&x[mt]||U(x,mt,g),nt[e]=g,nt[h]=vt,o)if(s={values:f?g:l("values"),keys:a?g:l("keys"),entries:_},r)for(p in s)p in x||et(x,p,s[p]);else V(V.P+V.F*(bt||u),e,s);return s},yt=function(e){return function(n,i){var o,a,r=String(t(n)),s=l(i),p=r.length;return s<0||s>=p?e?"":void 0:(o=r.charCodeAt(s))<55296||o>56319||s+1===p||(a=r.charCodeAt(s+1))<56320||a>57343?e?r.charAt(s):o:e?r.slice(s,s+2):a-56320+(o-55296<<10)+65536}}(!0);kt(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=yt(e,n),this._i+=t.length,{value:t,done:!1})}));var wt=function(t,e){return{value:e,done:!!t}};kt(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,wt(1)):wt(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values");nt.Arguments=nt.Array;for(var Et=lt("toStringTag"),Ct="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),St=0;St<Ct.length;St++){var Pt=Ct[St],Tt=b[Pt],Mt=Tt&&Tt.prototype;Mt&&!Mt[Et]&&U(Mt,Et,Pt),nt[Pt]=nt.Array}var At={f:lt},Bt=At.f("iterator"),Nt=g((function(t){var e=w("meta"),n=W.f,o=0,a=Object.isExtensible||function(){return!0},r=!L((function(){return a(Object.preventExtensions({}))})),s=function(t){n(t,e,{value:{i:"O"+ ++o,w:{}}})},p=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!O(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,e)){if(!a(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!i(t,e)){if(!a(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return r&&p.NEED&&a(t)&&!i(t,e)&&s(t),t}}})),Ot=(Nt.KEY,Nt.NEED,Nt.fastKey,Nt.getWeak,Nt.onFreeze,W.f),jt=function(t){var e=m.Symbol||(m.Symbol={});"_"==t.charAt(0)||t in e||Ot(e,t,{value:At.f(t)})},Lt={f:Object.getOwnPropertySymbols},It={f:{}.propertyIsEnumerable},Ht=Array.isArray||function(t){return"Array"==a(t)},zt=M.concat("length","prototype"),Ft={f:Object.getOwnPropertyNames||function(t){return T(t,zt)}},Rt=Ft.f,Dt={}.toString,Yt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Wt={f:function(t){return Yt&&"[object Window]"==Dt.call(t)?function(t){try{return Rt(t)}catch(t){return Yt.slice()}}(t):Rt(s(t))}},Gt=Object.getOwnPropertyDescriptor,Ut={f:I?Gt:function(t,e){if(t=s(t),e=D(e,!0),R)try{return Gt(t,e)}catch(t){}if(i(t,e))return G(!It.f.call(t,e),t[e])}},qt=Nt.KEY,Vt=Ut.f,$t=W.f,Kt=Wt.f,Zt=b.Symbol,Jt=b.JSON,Xt=Jt&&Jt.stringify,Qt=lt("_hidden"),te=lt("toPrimitive"),ee={}.propertyIsEnumerable,ne=v("symbol-registry"),ie=v("symbols"),oe=v("op-symbols"),ae=Object.prototype,re="function"==typeof Zt,se=b.QObject,pe=!se||!se.prototype||!se.prototype.findChild,ce=I&&L((function(){return 7!=ct($t({},"a",{get:function(){return $t(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=Vt(ae,e);i&&delete ae[e],$t(t,e,n),i&&t!==ae&&$t(ae,e,i)}:$t,le=function(t){var e=ie[t]=ct(Zt.prototype);return e._k=t,e},he=re&&"symbol"==typeof Zt.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Zt},fe=function(t,e,n){return t===ae&&fe(oe,e,n),j(t),e=D(e,!0),j(n),i(ie,e)?(n.enumerable?(i(t,Qt)&&t[Qt][e]&&(t[Qt][e]=!1),n=ct(n,{enumerable:G(0,!1)})):(i(t,Qt)||$t(t,Qt,G(1,{})),t[Qt][e]=!0),ce(t,e,n)):$t(t,e,n)},ue=function(t,e){j(t);for(var n,i=function(t){var e=A(t),n=Lt.f;if(n)for(var i,o=n(t),a=It.f,r=0;o.length>r;)a.call(t,i=o[r++])&&e.push(i);return e}(e=s(e)),o=0,a=i.length;a>o;)fe(t,n=i[o++],e[n]);return t},xe=function(t){var e=ee.call(this,t=D(t,!0));return!(this===ae&&i(ie,t)&&!i(oe,t))&&(!(e||!i(this,t)||!i(ie,t)||i(this,Qt)&&this[Qt][t])||e)},de=function(t,e){if(t=s(t),e=D(e,!0),t!==ae||!i(ie,e)||i(oe,e)){var n=Vt(t,e);return!n||!i(ie,e)||i(t,Qt)&&t[Qt][e]||(n.enumerable=!0),n}},ge=function(t){for(var e,n=Kt(s(t)),o=[],a=0;n.length>a;)i(ie,e=n[a++])||e==Qt||e==qt||o.push(e);return o},_e=function(t){for(var e,n=t===ae,o=Kt(n?oe:s(t)),a=[],r=0;o.length>r;)!i(ie,e=o[r++])||n&&!i(ae,e)||a.push(ie[e]);return a};re||(et((Zt=function(){if(this instanceof Zt)throw TypeError("Symbol is not a constructor!");var t=w(arguments.length>0?arguments[0]:void 0),e=function(n){this===ae&&e.call(oe,n),i(this,Qt)&&i(this[Qt],t)&&(this[Qt][t]=!1),ce(this,t,G(1,n))};return I&&pe&&ce(ae,t,{configurable:!0,set:e}),le(t)}).prototype,"toString",(function(){return this._k})),Ut.f=de,W.f=fe,Ft.f=Wt.f=ge,It.f=xe,Lt.f=_e,At.f=function(t){return le(lt(t))}),V(V.G+V.W+V.F*!re,{Symbol:Zt});for(var me="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),be=0;me.length>be;)lt(me[be++]);for(var ve=A(lt.store),ke=0;ve.length>ke;)jt(ve[ke++]);V(V.S+V.F*!re,"Symbol",{for:function(t){return i(ne,t+="")?ne[t]:ne[t]=Zt(t)},keyFor:function(t){if(!he(t))throw TypeError(t+" is not a symbol!");for(var e in ne)if(ne[e]===t)return e},useSetter:function(){pe=!0},useSimple:function(){pe=!1}}),V(V.S+V.F*!re,"Object",{create:function(t,e){return void 0===e?ct(t):ue(ct(t),e)},defineProperty:fe,defineProperties:ue,getOwnPropertyDescriptor:de,getOwnPropertyNames:ge,getOwnPropertySymbols:_e}),Jt&&V(V.S+V.F*(!re||L((function(){var t=Zt();return"[null]"!=Xt([t])||"{}"!=Xt({a:t})||"{}"!=Xt(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=e=i[1],(O(e)||void 0!==t)&&!he(t))return Ht(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!he(e))return e}),i[1]=e,Xt.apply(Jt,i)}}),Zt.prototype[te]||U(Zt.prototype,te,Zt.prototype.valueOf),ut(Zt,"Symbol"),ut(Math,"Math",!0),ut(b.JSON,"JSON",!0),jt("asyncIterator"),jt("observable");var ye=m.Symbol,we=g((function(t){function e(t){return(e="function"==typeof ye&&"symbol"==typeof Bt?function(t){return typeof t}:function(t){return t&&"function"==typeof ye&&t.constructor===ye&&t!==ye.prototype?"symbol":typeof t})(t)}function n(i){return"function"==typeof ye&&"symbol"===e(Bt)?t.exports=n=function(t){return e(t)}:t.exports=n=function(t){return t&&"function"==typeof ye&&t.constructor===ye&&t!==ye.prototype?"symbol":e(t)},n(i)}t.exports=n}));var Ee=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var Ce=function(t,e){return!e||"object"!==we(e)&&"function"!=typeof e?Ee(t):e};$("getPrototypeOf",(function(){return function(t){return _t(e(t))}}));var Se=m.Object.getPrototypeOf,Pe=function(t,e){if(j(t),!O(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Te={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=N(Function.call,Ut.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return Pe(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:Pe};V(V.S,"Object",{setPrototypeOf:Te.set});var Me=m.Object.setPrototypeOf,Ae=g((function(t){function e(n){return t.exports=e=Me?Se:function(t){return t.__proto__||Se(t)},e(n)}t.exports=e}));V(V.S,"Object",{create:ct});var Be=m.Object,Ne=function(t,e){return Be.create(t,e)},Oe=g((function(t){function e(n,i){return t.exports=e=Me||function(t,e){return t.__proto__=e,t},e(n,i)}t.exports=e}));var je=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Ne(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oe(t,e)};var Le,Ie,He=function(t,e,n){return e in t?X(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},ze="pilot_happix_noti_showed_timestamp",Fe="https://s.pixfs.net/common/pixhappix-ui-module/images",Re=400222080391957,De="CLOUDY",Ye="RAINY",We="SUNNY",Ge=(He(Le={},De,"".concat(Fe,"/weather_cloud.svg")),He(Le,Ye,"".concat(Fe,"/weather_rain.svg")),He(Le,We,"".concat(Fe,"/weather_sun.svg")),Le),Ue=(He(Ie={},De,"陰天還是要防曬唷～"),He(Ie,Ye,"出門記得帶把傘！"),He(Ie,We,"今天是晴朗的好天氣"),Ie),qe={$prefix:"pixnet-happix-pilot",$mobile_screen_max_width:"768px",$desktop_screen_min_width:"769px",$big_happix_w:"70px",$big_happix_h:"80px",$color_white:"#ffffff",$color_black:"#000000",$color_grey:"#e9e9e9",$color_light_grey:"#f6f6f6",$color_deep_grey:"#4a4a4a",$color_font_grey:"#5e5f6a",$color_red:"#ff6868",$color_dark_red:"#f65f5e",$color_light_orange:"#fe7c46",$color_orange:"#f04e2f",$color_blue:"#6eacf5",$color_light_blue:"#00aef0",$color_deep_blue:"#4257ac",$color_dark_blue:"#4a90e2",$color_box_shadow:"rgba(0, 0, 0, 0.25)",$messenger_card_border_radius:"20px",$card_content_padding:"15px",$launcher_bar_height:"45px",$img_path_prefix:Fe},Ve=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Z(this,t),this.containerElement=e,this.props=n}return tt(t,[{key:"getCssPrefix",value:function(){return qe.$prefix}}]),t}(),$e={wrapper:function(t){return{isEmpty:function(){return void 0===t},getElement:function(){return t},getElementByPostfix:function(e){return $e.wrapper(t.querySelector(".".concat(qe.$prefix,"__").concat(e)))},getElementBySelector:function(e){return $e.wrapper(t.querySelector(e))},getParentNode:function(){return $e.wrapper(t.parentNode)},getDataset:function(){return t.dataset},hasClass:function(e){return t.classList.contains(e)},addClass:function(e){return t.classList.add(e),this},removeClass:function(e){return t.classList.remove(e),this},toggleClass:function(e){return t.classList.toggle(e),this},appendChild:function(e){return t.appendChild(e),this},setHTML:function(e){return t.innerHTML=e,Ke(t),this},setStyle:function(e,n){return t.style[e]=n,this},bindEvent:function(e,n){return t.addEventListener(e,n),this},unbindEvent:function(e,n){return t.removeEventListener(e,n),this},fireEvent:function(e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)},scrollToTop:function(){t.scrollTop=0}}},getElementByPostfix:function(t){return $e.getElementBySelector(".".concat(qe.$prefix,"__").concat(t))},getElementBySelector:function(t){return $e.wrapper(document.querySelector(t))},createElement:function(t){var e=document.createElement("div");e.innerHTML=t;var n=document.createDocumentFragment();return Array.prototype.slice.apply(e.childNodes).map((function(t){return n.appendChild(t)})),n}},Ke=function t(e){if("SCRIPT"===e.tagName)return e.parentNode.replaceChild(Ze(e),e),e;for(var n=0,i=e.childNodes;n<i.length;)t(i[n++]);return e},Ze=function(t){var e=document.createElement("script");e.text=t.innerHTML;for(var n=t.attributes.length-1;n>=0;n--)e.setAttribute(t.attributes[n].name,t.attributes[n].value);return e},Je=Ut.f;$("getOwnPropertyDescriptor",(function(){return function(t,e){return Je(s(t),e)}}));var Xe=m.Object,Qe=function(t,e){return Xe.getOwnPropertyDescriptor(t,e)},tn=m.Object.getOwnPropertySymbols;var en=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=K(n);"function"==typeof tn&&(i=i.concat(tn(n).filter((function(t){return Qe(n,t).enumerable})))),i.forEach((function(e){He(t,e,n[e])}))}return t},nn=["isIncludeGAScript","isIncludePAScript"],on={currentOptions:{variant:"",projectName:"",domainAppend:"",loginURL:"",logoutURL:"",memberUniqid:"",giftNotificationContent:{},ga:{isIncludePAScript:!0,trackingId:""},pa:{isIncludePAScript:!0,venue:""},style:{width:{pilotWidth:960},zIndex:{pilotZIndex:2},bubbleFixedPosition:{left:null,right:null,top:null,bottom:null}}},isInvalidConfig:function(t,e){return!t.hasOwnProperty(e)&&-1===nn.indexOf(e)},setOptions:function(t){if(!t)throw new Error("ERROR: PixHappixPilot options are required.");if(!t instanceof Object)throw new Error("ERROR: PixHappixPilot options should be json object.");!function t(e,n,i){return K(n).forEach((function(o){var a=e?e+".":"";on.isInvalidConfig(i,o),i[o]instanceof Object&&t("".concat(a).concat(o),n[o],i[o])}))}("",on.currentOptions,t),on.currentOptions=en({},on.currentOptions,t)},getOptions:function(){return{getVariant:function(){return on.currentOptions.variant},getProjectName:function(){return on.currentOptions.projectName},getDomainAppend:function(){return on.currentOptions.domainAppend},getLoginURL:function(){return on.currentOptions.loginURL},getLogoutURL:function(){return on.currentOptions.logoutURL},getMemberUniqid:function(){return on.currentOptions.memberUniqid},getGiftNotificationContent:function(){return on.currentOptions.giftNotificationContent},getTrackingId:function(){return on.currentOptions.ga.trackingId},isIncludeGAScript:function(){return on.currentOptions.ga.isIncludeGAScript},getVenue:function(){return on.currentOptions.pa.venue},isIncludePAScript:function(){return on.currentOptions.pa.isIncludePAScript},getPilotWidth:function(){return on.currentOptions.style.width.pilotWidth},getPilotZIndex:function(){return on.currentOptions.style.zIndex.pilotZIndex},getBubbleFixedPosition:function(){return on.currentOptions.style.bubbleFixedPosition||{}}}}},an=function(){var t,e,n,i,o;"undefined"==typeof ga&&(t=window,e=document,n="script","ga",t.GoogleAnalyticsObject="ga",t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,i=e.createElement(n),o=e.getElementsByTagName(n)[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(i,o))},rn=function(t){ga("create",t,"auto","pixnetHappixPilot"),ga("pixnetHappixPilot.set","forceSSL",!0)},sn=function(t,e){ga("create",t,"auto","CTATracker"),ga("CTATracker.set","userId",e),ga("CTATracker.set","forceSSL",!0)},pn=function(t,e){var n,i,o,a;"undefined"==typeof _piq&&(i="script",o=(n=document).getElementsByTagName(i)[0],(a=n.createElement(i)).async=1,a.src="https://s.pixanalytics.com/js/pi.min.js",o.parentNode.insertBefore(a,o))},cn=function(t){ga("pixnetHappixPilot.set","userId",t)},ln=function(t){"undefined"!=typeof ga&&ga("pixnetHappixPilot.send","event",t.category,t.action,t.label,t.id),"undefined"!=typeof _piq&&_piq.push(["trackEvent",t.category,t.action,t.label,t.id])},hn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=on.getOptions().getGiftNotificationContent().project_id+"_CTA";"undefined"!=typeof ga&&ga("CTATracker.send","event",n,t,e),"undefined"!=typeof _piq&&_piq.push(["trackEvent",n,t,e])},fn=function(t){(new Image).src=t},un=function(t,e,n){var i="?with=".concat(e,"&height=").concat(n,"&url=").concat(encodeURIComponent(t));return"".concat("https://imageproxy.pimg.tw/zoomcrop").concat(i)};function xn(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}xn('@media screen and (max-width:768px){.pixnet-happix-pilot__sticky-box{position:fixed;right:0;bottom:45px;left:0;z-index:99998;width:100vw;height:100px;font-family:PingFang TC;color:#000;background:#fff;border-radius:10px 10px 0 0;will-change:transform;-webkit-transform:translateY(100%);transform:translateY(100%);-webkit-transition:-webkit-transform .5s;transition:-webkit-transform .5s;transition:transform .5s;transition:transform .5s,-webkit-transform .5s}.pixnet-happix-pilot__sticky-box a{text-decoration:none}.pixnet-happix-pilot__sticky-box.show{-webkit-box-shadow:0 0 20px rgba(0,0,0,.25);box-shadow:0 0 20px rgba(0,0,0,.25);-webkit-transform:translateY(0);transform:translateY(0)}.pixnet-happix-pilot__sticky-box__link--title{-ms-flex-line-pack:center;align-content:center;overflow:hidden;width:calc(100% - 44px);height:24px;padding-top:5px;padding-left:10px;font-weight:500;font-size:17px;line-height:24px;letter-spacing:1px}.pixnet-happix-pilot__sticky-box__link--title,.pixnet-happix-pilot__sticky-box__link__img{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pixnet-happix-pilot__sticky-box__link__img{justify-items:center;margin-right:3px;border-radius:50%;background-color:#f6f6f6}.pixnet-happix-pilot__sticky-box__title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__img{width:55px!important;height:55px!important;margin:6px 10px 10px!important;border-radius:10px}.pixnet-happix-pilot__sticky-box__info--description{position:absolute;top:33px;width:calc(100% - 40px);font-size:13px!important;letter-spacing:1px;color:#5e5f6a!important;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__link--description{margin-top:2px;top:33px}.pixnet-happix-pilot__sticky-box__price{position:absolute;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;bottom:8px;left:75px}.pixnet-happix-pilot__sticky-box__price div{pointer-events:none}.pixnet-happix-pilot__sticky-box__price>div:nth-child(2){margin-right:12px;line-height:10px}.pixnet-happix-pilot__sticky-box__price>div>strike{font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__price>div>span:first-child{font-size:16px!important;margin-right:5px;color:#f65f5e!important;font-weight:600}.pixnet-happix-pilot__sticky-box__price>div>span:nth-child(2){font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__button{position:absolute;right:10px;bottom:10px;padding:8px 27px;font-weight:500;font-size:15px;letter-spacing:1px;color:#fff;background-color:#00aef0;border-radius:6px}.pixnet-happix-pilot__sticky-box__close{position:absolute;top:0;right:0;width:42px;height:42px;color:transparent;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_close.svg) 100% 0}.pixnet-happix-pilot__sticky-box__info{padding-left:30px;font-size:17px;line-height:2;color:#f04e2f;background:transparent 5px no-repeat}.pixnet-happix-pilot__sticky-box__link--button{position:absolute;right:10px;bottom:10px;width:120px;height:36px;font-size:13px;color:#fff;background-color:#f04e2f;border-radius:6px}.pixnet-happix-pilot__sticky-box__btn{display:inline-block;width:120px;height:36px;font-weight:500;font-size:15px;line-height:36px;letter-spacing:1px;text-align:center}.pixnet-happix-pilot__sticky-box__info--date,.pixnet-happix-pilot__sticky-box__info--people,.pixnet-happix-pilot__sticky-box__link--description,.pixnet-happix-pilot__sticky-box__link--price,.pixnet-happix-pilot__sticky-box__link--title{color:inherit;top:33px}.pixnet-happix-pilot__sticky-box__btn--red{background-color:#f04e2f}.pixnet-happix-pilot__sticky-box__btn--blue{background-color:#00aef0}}@media screen and (min-width:769px){.pixnet-happix-pilot__sticky-box{position:fixed;right:calc(50% - 452px);bottom:65px;z-index:1000;width:360px;max-width:100vw;height:120px;font-family:PingFang TC;color:#000;background:#fff;border-radius:10px;will-change:transform;-webkit-transform:translateY(200px);transform:translateY(200px);-webkit-transition:-webkit-transform .5s;transition:-webkit-transform .5s;transition:transform .5s;transition:transform .5s,-webkit-transform .5s;cursor:pointer}.pixnet-happix-pilot__sticky-box:after{content:"";position:absolute;right:40px;bottom:-20px;width:20px;height:20px;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/cta_triangle_white.svg)}.pixnet-happix-pilot__sticky-box a{text-decoration:none}.pixnet-happix-pilot__sticky-box.show{-webkit-box-shadow:0 0 20px rgba(0,0,0,.25);box-shadow:0 0 20px rgba(0,0,0,.25);-webkit-transform:translateY(0);transform:translateY(0)}.pixnet-happix-pilot__sticky-box__link--title{-ms-flex-line-pack:center;align-content:center;overflow:hidden;width:calc(100% - 50px);height:24px;padding-top:12px;padding-left:15px;font-weight:500;font-size:17px;line-height:24px;letter-spacing:1px}.pixnet-happix-pilot__sticky-box__link--title,.pixnet-happix-pilot__sticky-box__link__img{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pixnet-happix-pilot__sticky-box__link__img{justify-items:center;margin-right:3px;border-radius:50%;background-color:#f6f6f6}.pixnet-happix-pilot__sticky-box__title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__img{width:66px!important;height:66px!important;margin:5px 15px 15px!important;border-radius:10px}.pixnet-happix-pilot__sticky-box__info--description{position:absolute;top:33px;width:calc(100% - 55px);font-size:13px!important;letter-spacing:1px;color:#5e5f6a!important;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__link--description{margin-top:2px}.pixnet-happix-pilot__sticky-box__price{position:absolute;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;bottom:8px}.pixnet-happix-pilot__sticky-box__price div{pointer-events:none}.pixnet-happix-pilot__sticky-box__price>div:nth-child(2){margin-right:12px;line-height:10px}.pixnet-happix-pilot__sticky-box__price>div>strike{font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__price>div>span:first-child{font-size:16px!important;margin-right:5px;color:#f65f5e!important;font-weight:600}.pixnet-happix-pilot__sticky-box__price>div>span:nth-child(2){font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__button{position:absolute;right:10px;bottom:10px;padding:10px 25px;font-weight:500;font-size:15px;letter-spacing:1px;color:#fff;background-color:#00aef0;border-radius:6px}.pixnet-happix-pilot__sticky-box__close{position:absolute;top:0;right:0;width:42px;height:42px;padding-top:4px;color:transparent;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_close.svg) 100% 0}.pixnet-happix-pilot__sticky-box__info{padding-left:30px;font-size:17px;line-height:2;color:#f04e2f;background:transparent 5px no-repeat}.pixnet-happix-pilot__sticky-box__link--button{position:absolute;right:30px;bottom:15px;width:120px;height:36px;font-size:13px;color:#fff;background-color:#f04e2f;border-radius:6px;cursor:pointer}.pixnet-happix-pilot__sticky-box__btn{display:inline-block;width:120px;height:36px;font-weight:500;font-size:15px;line-height:36px;letter-spacing:1px;text-align:center}.pixnet-happix-pilot__sticky-box__info--date,.pixnet-happix-pilot__sticky-box__info--people,.pixnet-happix-pilot__sticky-box__link--description,.pixnet-happix-pilot__sticky-box__link--price,.pixnet-happix-pilot__sticky-box__link--title{color:inherit}.pixnet-happix-pilot__sticky-box__btn--red{background-color:#f04e2f}.pixnet-happix-pilot__sticky-box__btn--blue{background-color:#00aef0}}');var dn=function(t){function e(t,n){var i;return Z(this,e),(i=Ce(this,Ae(e).call(this,t))).isSendCTAViewEvent=!1,i.giftNotification=n||{},i.giftNotificationContent=i.giftNotification.widget_content||{},i.giftNotificationContentType=i.giftNotification.content_type||"",i.ga=i.giftNotificationContent.ga||"",i.id=i.giftNotification.project_id,i.handleNavigate=i.handleNavigate.bind(Ee(Ee(i))),i.bindCTAClickEvent=i.bindCTAClickEvent.bind(Ee(Ee(i))),i.openNewWindow=i.openNewWindow.bind(Ee(Ee(i))),i}return je(e,Ve),tt(e,[{key:"makeid",value:function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*i));return e}},{key:"getClickLink",value:function(t){var e=t.link,n=e.includes("?")?"&":"?",i=this.makeid(40);return"".concat(e).concat(n,"click_id=").concat(i)}},{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=this.giftNotificationContent.img_link||"",n=this.giftNotificationContent.title||"",i=this.giftNotificationContent.description||"",o=this.giftNotificationContent.button_name||"",a=this.giftNotificationContent.position_html,r=this.getClickLink(this.giftNotificationContent),s="",p="",c="";return e&&(s='<a class="'.concat(t,'__sticky-box__link--img" href="').concat(r,'" target="_blank" rel="nofollow noopener">\n                        <img src="').concat(un(e,80,80),'" class="').concat(t,'__sticky-box__img" style="float:left;margin:10px;width:80px;height:80px;">\n                    </a>')),i&&(p='<a class="'.concat(t,'__sticky-box__link--description" href="').concat(r,'" target="_blank" rel="nofollow noopener">\n                        <span class="').concat(t,'__sticky-box__info--description" style="font-size:12px;color:#999;">').concat(i,"</span>\n                    </a>")),o&&(c='<a href="'.concat(r,'" class="').concat(t,'__sticky-box__button" target="_blank" rel="nofollow noopener">\n                ').concat(o,"\n            </a>")),"script"===this.giftNotificationContentType&&a?'<div class="'.concat(t,"__sticky-box ").concat(t,'__sticky-box" data-title="').concat(n,'" data-img-link="').concat(e,'" data-description="').concat(i,'" data-link="').concat(r,'" data-button-name="').concat(o,'">\n                ').concat(a,'\n                <div class="').concat(t,'__sticky-box__close"></div>\n            </div>'):'<div class="'.concat(t,"__sticky-box ").concat(t,'__sticky-box" data-title="').concat(n,'" data-img-link="').concat(e,'" data-description="').concat(i,'" data-link="').concat(r,'" data-button-name="').concat(o,'">\n            <a class="').concat(t,'__sticky-box__link--title" href="').concat(r,'" target="_blank" rel="nofollow noopener">\n                <div class="').concat(t,'__sticky-box__link__img"><img src="').concat(Fe,'/btn_gift_cta_y.svg" width="18" height="18"/></div>\n                <div class="').concat(t,'__sticky-box__title" style="height:auto;">').concat(n,"</div>\n            </a>\n            ").concat(s,"\n            ").concat(p,"\n            ").concat(this.getContentTemplate(),'\n            <div class="').concat(t,'__sticky-box__close"></div>\n            ').concat(c,"\n        </div>")}},{key:"getContentTemplate",value:function(){var t=this.getCssPrefix(),e=this.giftNotificationContent.html||"",n=this.giftNotificationContent.original_price||"",i=this.giftNotificationContent.price||"",o="";return i&&"0"!==i?(""!==n&&"0"!==n&&(o="<div></div><div><strike>".concat(n,"</strike></div>")),'\n                <a class="'.concat(t,'__sticky-box__price" href="').concat(this.giftNotificationContent.link,'" target="_blank" rel="nofollow noopener">\n                    ').concat(o,"\n                    <div>\n                        <span>").concat(i,"</span><span>起</span>\n                    </div>\n                </a>\n            ")):e?'\n                <a class="'.concat(t,'__sticky-box__price" href="').concat(this.giftNotificationContent.link,'" target="_blank" rel="nofollow noopener">\n                    ').concat(e,"\n                </a>\n            "):""}},{key:"getElements",value:function(){this.giftNotificationElement=$e.getElementByPostfix("sticky-box"),this.closeButtonElement=this.giftNotificationElement.getElementByPostfix("sticky-box__close")}},{key:"bindEvents",value:function(){this.giftNotificationElement.bindEvent("click",this.bindCTAClickEvent)}},{key:"bindCTAClickEvent",value:function(t){var e=t.target,n=this.giftNotification.click_link.match(/\?/)?"&":"?";if("pixnet-happix-pilot__sticky-box__close"===e.className)return this.containerElement.fireEvent("close"),this.giftNotificationElement.removeClass("show"),hn("CTA_Close",location.href),void fn("".concat(this.giftNotification.click_link).concat(n,"position=close"));var i={title:["CTA_Click_Title","title"],price:["CTA_Click_Price","other"],btn:["CTA_Click_Button","button"],img:["CTA_Click_Image","image"],description:["CTA_Click_Description","description"],button:["CTA_Click_Button","button"]},o="CTA_Click_other",a="other";for(var r in i)if(0<=e.className.indexOf(r)){o=i[r][0],a=i[r][1];break}this.giftNotificationContent.link?(hn(o,"".concat(location.href,"::").concat(this.giftNotificationContent.link)),fn("".concat(this.giftNotification.click_link).concat(n,"position=").concat(a)),"CTA_Click_other"===o&&(this.openNewWindow(this.giftNotificationContent.link),t.preventDefault())):t.preventDefault()}},{key:"handleNavigate",value:function(){var t=this.giftNotificationContent.link;t&&window.open(t+"?utm_medium=-new","_blank")}},{key:"openNewWindow",value:function(t){var e=document.createElement("a");e.href=t,e.target="_blank",e.rel="noopener",e.click()}},{key:"hide",value:function(){return this.giftNotificationElement.removeClass("show"),this}},{key:"show",value:function(){return this.giftNotificationElement.addClass("show"),this.isSendCTAViewEvent||(hn("CTA_View"),ln({category:"pilot-CTA",action:"giftView"}),fn("".concat(this.giftNotification.pv_link)),this.isSendCTAViewEvent=!0),this}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this.giftNotification.pv_load_link&&fn("".concat(this.giftNotification.pv_load_link)),this}}]),e}();xn("@media screen and (max-width:768px){.pixnet-happix-pilot__happix-notification{position:fixed;right:10px;bottom:47px;left:10px;width:calc(100% - 20px);margin:auto}.pixnet-happix-pilot__happix-notification.hidden{opacity:0;-webkit-transform:translateY(52px);transform:translateY(52px)}.pixnet-happix-pilot__happix-notification__wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:50px;background:rgba(0,0,0,.8);border-radius:20px;cursor:pointer}.pixnet-happix-pilot__happix-notification__icon-container{position:relative;width:58px;-ms-flex-item-align:end;align-self:flex-end}.pixnet-happix-pilot__happix-notification__icon-container>*{position:absolute;bottom:-12px;left:-9px;width:70px}.pixnet-happix-pilot__happix-notification__message{-webkit-box-flex:1;-ms-flex:1;flex:1;max-height:36px;color:#fff;font-family:PingFang TC;font-size:13px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.9px;text-overflow:clip}.pixnet-happix-pilot__happix-notification__separator{height:25px;margin-left:11px;border-left:1px solid hsla(0,0%,100%,.2)}.pixnet-happix-pilot__happix-notification__close-button{width:20px;margin-right:15px;margin-left:15px;cursor:pointer}}@media screen and (min-width:769px){.pixnet-happix-pilot__happix-notification{position:fixed;right:0;bottom:48px;left:0;width:100%;margin:auto;-webkit-transition:all .4s;transition:all .4s}.pixnet-happix-pilot__happix-notification.hidden{opacity:0;-webkit-transform:translateY(52px);transform:translateY(52px)}.pixnet-happix-pilot__happix-notification__wrapper{position:absolute;right:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:300px;height:50px;background:rgba(0,0,0,.8);border-radius:20px;cursor:pointer}.pixnet-happix-pilot__happix-notification__icon-container{position:relative;width:58px;-ms-flex-item-align:end;align-self:flex-end}.pixnet-happix-pilot__happix-notification__icon-container>*{position:absolute;bottom:-12px;left:-9px;width:70px}.pixnet-happix-pilot__happix-notification__message{-webkit-box-flex:1;-ms-flex:1;flex:1;max-height:36px;color:#fff;font-family:PingFang TC;font-size:13px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.9px;text-overflow:clip}.pixnet-happix-pilot__happix-notification__separator{height:25px;margin-left:11px;border-left:1px solid hsla(0,0%,100%,.2)}.pixnet-happix-pilot__happix-notification__close-button{width:20px;margin-right:15px;margin-left:15px;cursor:pointer}}");var gn=function(t){function e(t){return Z(this,e),Ce(this,Ae(e).call(this,t))}return je(e,Ve),tt(e,[{key:"getTemplates",value:function(){var t=this.getCssPrefix();return'\n            <div\n                class="'.concat(t,'__happix-notification hidden"\n                style="max-width: ').concat(on.getOptions().getPilotWidth(),'px"\n            >\n                <div class="').concat(t,'__happix-notification__wrapper">\n                    <div class="').concat(t,'__happix-notification__icon-container">\n                        <img\n                            src="').concat(Fe,'/btn-happix-ufo.png"\n                            srcset="').concat(Fe,"/btn-happix-ufo@2x.png 2x,\n                                ").concat(Fe,'/btn-happix-ufo@3x.png 3x"\n                        />\n                    </div>\n                    <div class="').concat(t,'__happix-notification__message"></div>\n                    <div class="').concat(t,'__happix-notification__separator"></div>\n                    <img\n                        class="').concat(t,'__happix-notification__close-button"\n                        src="').concat(Fe,'/btn_close_alpha_v2.svg"\n                    />\n                </div>\n            </div>\n        ')}},{key:"getElements",value:function(){this.happixNotificationElement=$e.getElementByPostfix("happix-notification"),this.closeButtonElement=this.happixNotificationElement.getElementByPostfix("happix-notification__close-button"),this.happixMessage=this.happixNotificationElement.getElementByPostfix("happix-notification__message")}},{key:"bindEvents",value:function(){var t=this;this.closeButtonElement.bindEvent("click",(function(e){t.containerElement.fireEvent("close"),e.stopPropagation()})),this.happixNotificationElement.bindEvent("click",(function(){t.containerElement.fireEvent("click")}))}},{key:"hide",value:function(){return this.happixNotificationElement.addClass("hidden"),this}},{key:"show",value:function(){return this.happixNotificationElement.setStyle("transition","all .4s").removeClass("hidden"),this}},{key:"setMessage",value:function(t){this.happixMessage.setHTML(t)}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplates()),this.getElements(),this.bindEvents(),this}}]),e}(),_n=Object.assign,mn=!_n||L((function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=_n({},t)[n]||Object.keys(_n({},e)).join("")!=i}))?function(t,n){for(var i=e(t),o=arguments.length,a=1,s=Lt.f,p=It.f;o>a;)for(var c,l=r(arguments[a++]),h=s?A(l).concat(s(l)):A(l),f=h.length,u=0;f>u;)p.call(l,c=h[u++])&&(i[c]=l[c]);return i}:_n;V(V.S+V.F,"Object",{assign:mn});var bn=m.Object.assign,vn=g((function(t,e){!function(){var n="object"==typeof self&&self.self===self&&self||"object"==typeof d&&d.global===d&&d||this||{},i=n._,o=Array.prototype,a=Object.prototype,r="undefined"!=typeof Symbol?Symbol.prototype:null,s=o.push,p=o.slice,c=a.toString,l=a.hasOwnProperty,h=Array.isArray,f=Object.keys,u=Object.create,x=function(){},g=function(t){return t instanceof g?t:this instanceof g?void(this._wrapped=t):new g(t)};e.nodeType?n._=g:(!t.nodeType&&t.exports&&(e=t.exports=g),e._=g),g.VERSION="1.9.1";var _,m=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,a){return t.call(e,n,i,o,a)}}return function(){return t.apply(e,arguments)}},b=function(t,e,n){return g.iteratee!==_?g.iteratee(t,e):null==t?g.identity:g.isFunction(t)?m(t,e,n):g.isObject(t)&&!g.isArray(t)?g.matcher(t):g.property(t)};g.iteratee=_=function(t,e){return b(t,e,1/0)};var v=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),i=Array(n),o=0;o<n;o++)i[o]=arguments[o+e];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i);case 2:return t.call(this,arguments[0],arguments[1],i)}var a=Array(e+1);for(o=0;o<e;o++)a[o]=arguments[o];return a[e]=i,t.apply(this,a)}},k=function(t){if(!g.isObject(t))return{};if(u)return u(t);x.prototype=t;var e=new x;return x.prototype=null,e},y=function(t){return function(e){return null==e?void 0:e[t]}},w=function(t,e){return null!=t&&l.call(t,e)},E=function(t,e){for(var n=e.length,i=0;i<n;i++){if(null==t)return;t=t[e[i]]}return n?t:void 0},C=Math.pow(2,53)-1,S=y("length"),P=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=C};g.each=g.forEach=function(t,e,n){var i,o;if(e=m(e,n),P(t))for(i=0,o=t.length;i<o;i++)e(t[i],i,t);else{var a=g.keys(t);for(i=0,o=a.length;i<o;i++)e(t[a[i]],a[i],t)}return t},g.map=g.collect=function(t,e,n){e=b(e,n);for(var i=!P(t)&&g.keys(t),o=(i||t).length,a=Array(o),r=0;r<o;r++){var s=i?i[r]:r;a[r]=e(t[s],s,t)}return a};var T=function(t){return function(e,n,i,o){var a=arguments.length>=3;return function(e,n,i,o){var a=!P(e)&&g.keys(e),r=(a||e).length,s=t>0?0:r-1;for(o||(i=e[a?a[s]:s],s+=t);s>=0&&s<r;s+=t){var p=a?a[s]:s;i=n(i,e[p],p,e)}return i}(e,m(n,o,4),i,a)}};g.reduce=g.foldl=g.inject=T(1),g.reduceRight=g.foldr=T(-1),g.find=g.detect=function(t,e,n){var i=(P(t)?g.findIndex:g.findKey)(t,e,n);if(void 0!==i&&-1!==i)return t[i]},g.filter=g.select=function(t,e,n){var i=[];return e=b(e,n),g.each(t,(function(t,n,o){e(t,n,o)&&i.push(t)})),i},g.reject=function(t,e,n){return g.filter(t,g.negate(b(e)),n)},g.every=g.all=function(t,e,n){e=b(e,n);for(var i=!P(t)&&g.keys(t),o=(i||t).length,a=0;a<o;a++){var r=i?i[a]:a;if(!e(t[r],r,t))return!1}return!0},g.some=g.any=function(t,e,n){e=b(e,n);for(var i=!P(t)&&g.keys(t),o=(i||t).length,a=0;a<o;a++){var r=i?i[a]:a;if(e(t[r],r,t))return!0}return!1},g.contains=g.includes=g.include=function(t,e,n,i){return P(t)||(t=g.values(t)),("number"!=typeof n||i)&&(n=0),g.indexOf(t,e,n)>=0},g.invoke=v((function(t,e,n){var i,o;return g.isFunction(e)?o=e:g.isArray(e)&&(i=e.slice(0,-1),e=e[e.length-1]),g.map(t,(function(t){var a=o;if(!a){if(i&&i.length&&(t=E(t,i)),null==t)return;a=t[e]}return null==a?a:a.apply(t,n)}))})),g.pluck=function(t,e){return g.map(t,g.property(e))},g.where=function(t,e){return g.filter(t,g.matcher(e))},g.findWhere=function(t,e){return g.find(t,g.matcher(e))},g.max=function(t,e,n){var i,o,a=-1/0,r=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,p=(t=P(t)?t:g.values(t)).length;s<p;s++)null!=(i=t[s])&&i>a&&(a=i);else e=b(e,n),g.each(t,(function(t,n,i){((o=e(t,n,i))>r||o===-1/0&&a===-1/0)&&(a=t,r=o)}));return a},g.min=function(t,e,n){var i,o,a=1/0,r=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,p=(t=P(t)?t:g.values(t)).length;s<p;s++)null!=(i=t[s])&&i<a&&(a=i);else e=b(e,n),g.each(t,(function(t,n,i){((o=e(t,n,i))<r||o===1/0&&a===1/0)&&(a=t,r=o)}));return a},g.shuffle=function(t){return g.sample(t,1/0)},g.sample=function(t,e,n){if(null==e||n)return P(t)||(t=g.values(t)),t[g.random(t.length-1)];var i=P(t)?g.clone(t):g.values(t),o=S(i);e=Math.max(Math.min(e,o),0);for(var a=o-1,r=0;r<e;r++){var s=g.random(r,a),p=i[r];i[r]=i[s],i[s]=p}return i.slice(0,e)},g.sortBy=function(t,e,n){var i=0;return e=b(e,n),g.pluck(g.map(t,(function(t,n,o){return{value:t,index:i++,criteria:e(t,n,o)}})).sort((function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index})),"value")};var M=function(t,e){return function(n,i,o){var a=e?[[],[]]:{};return i=b(i,o),g.each(n,(function(e,o){var r=i(e,o,n);t(a,e,r)})),a}};g.groupBy=M((function(t,e,n){w(t,n)?t[n].push(e):t[n]=[e]})),g.indexBy=M((function(t,e,n){t[n]=e})),g.countBy=M((function(t,e,n){w(t,n)?t[n]++:t[n]=1}));var A=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;g.toArray=function(t){return t?g.isArray(t)?p.call(t):g.isString(t)?t.match(A):P(t)?g.map(t,g.identity):g.values(t):[]},g.size=function(t){return null==t?0:P(t)?t.length:g.keys(t).length},g.partition=M((function(t,e,n){t[n?0:1].push(e)}),!0),g.first=g.head=g.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:g.initial(t,t.length-e)},g.initial=function(t,e,n){return p.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},g.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:g.rest(t,Math.max(0,t.length-e))},g.rest=g.tail=g.drop=function(t,e,n){return p.call(t,null==e||n?1:e)},g.compact=function(t){return g.filter(t,Boolean)};var B=function(t,e,n,i){for(var o=(i=i||[]).length,a=0,r=S(t);a<r;a++){var s=t[a];if(P(s)&&(g.isArray(s)||g.isArguments(s)))if(e)for(var p=0,c=s.length;p<c;)i[o++]=s[p++];else B(s,e,n,i),o=i.length;else n||(i[o++]=s)}return i};g.flatten=function(t,e){return B(t,e,!1)},g.without=v((function(t,e){return g.difference(t,e)})),g.uniq=g.unique=function(t,e,n,i){g.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=b(n,i));for(var o=[],a=[],r=0,s=S(t);r<s;r++){var p=t[r],c=n?n(p,r,t):p;e&&!n?(r&&a===c||o.push(p),a=c):n?g.contains(a,c)||(a.push(c),o.push(p)):g.contains(o,p)||o.push(p)}return o},g.union=v((function(t){return g.uniq(B(t,!0,!0))})),g.intersection=function(t){for(var e=[],n=arguments.length,i=0,o=S(t);i<o;i++){var a=t[i];if(!g.contains(e,a)){var r;for(r=1;r<n&&g.contains(arguments[r],a);r++);r===n&&e.push(a)}}return e},g.difference=v((function(t,e){return e=B(e,!0,!0),g.filter(t,(function(t){return!g.contains(e,t)}))})),g.unzip=function(t){for(var e=t&&g.max(t,S).length||0,n=Array(e),i=0;i<e;i++)n[i]=g.pluck(t,i);return n},g.zip=v(g.unzip),g.object=function(t,e){for(var n={},i=0,o=S(t);i<o;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n};var N=function(t){return function(e,n,i){n=b(n,i);for(var o=S(e),a=t>0?0:o-1;a>=0&&a<o;a+=t)if(n(e[a],a,e))return a;return-1}};g.findIndex=N(1),g.findLastIndex=N(-1),g.sortedIndex=function(t,e,n,i){for(var o=(n=b(n,i,1))(e),a=0,r=S(t);a<r;){var s=Math.floor((a+r)/2);n(t[s])<o?a=s+1:r=s}return a};var O=function(t,e,n){return function(i,o,a){var r=0,s=S(i);if("number"==typeof a)t>0?r=a>=0?a:Math.max(a+s,r):s=a>=0?Math.min(a+1,s):a+s+1;else if(n&&a&&s)return i[a=n(i,o)]===o?a:-1;if(o!=o)return(a=e(p.call(i,r,s),g.isNaN))>=0?a+r:-1;for(a=t>0?r:s-1;a>=0&&a<s;a+=t)if(i[a]===o)return a;return-1}};g.indexOf=O(1,g.findIndex,g.sortedIndex),g.lastIndexOf=O(-1,g.findLastIndex),g.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var i=Math.max(Math.ceil((e-t)/n),0),o=Array(i),a=0;a<i;a++,t+=n)o[a]=t;return o},g.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],i=0,o=t.length;i<o;)n.push(p.call(t,i,i+=e));return n};var j=function(t,e,n,i,o){if(!(i instanceof e))return t.apply(n,o);var a=k(t.prototype),r=t.apply(a,o);return g.isObject(r)?r:a};g.bind=v((function(t,e,n){if(!g.isFunction(t))throw new TypeError("Bind must be called on a function");var i=v((function(o){return j(t,i,e,this,n.concat(o))}));return i})),g.partial=v((function(t,e){var n=g.partial.placeholder,i=function(){for(var o=0,a=e.length,r=Array(a),s=0;s<a;s++)r[s]=e[s]===n?arguments[o++]:e[s];for(;o<arguments.length;)r.push(arguments[o++]);return j(t,i,this,this,r)};return i})),g.partial.placeholder=g,g.bindAll=v((function(t,e){var n=(e=B(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=e[n];t[i]=g.bind(t[i],t)}})),g.memoize=function(t,e){var n=function(i){var o=n.cache,a=""+(e?e.apply(this,arguments):i);return w(o,a)||(o[a]=t.apply(this,arguments)),o[a]};return n.cache={},n},g.delay=v((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),g.defer=g.partial(g.delay,g,1),g.throttle=function(t,e,n){var i,o,a,r,s=0;n||(n={});var p=function(){s=!1===n.leading?0:g.now(),i=null,r=t.apply(o,a),i||(o=a=null)},c=function(){var c=g.now();s||!1!==n.leading||(s=c);var l=e-(c-s);return o=this,a=arguments,l<=0||l>e?(i&&(clearTimeout(i),i=null),s=c,r=t.apply(o,a),i||(o=a=null)):i||!1===n.trailing||(i=setTimeout(p,l)),r};return c.cancel=function(){clearTimeout(i),s=0,i=o=a=null},c},g.debounce=function(t,e,n){var i,o,a=function(e,n){i=null,n&&(o=t.apply(e,n))},r=v((function(r){if(i&&clearTimeout(i),n){var s=!i;i=setTimeout(a,e),s&&(o=t.apply(this,r))}else i=g.delay(a,e,this,r);return o}));return r.cancel=function(){clearTimeout(i),i=null},r},g.wrap=function(t,e){return g.partial(e,t)},g.negate=function(t){return function(){return!t.apply(this,arguments)}},g.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},g.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},g.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},g.once=g.partial(g.before,2),g.restArguments=v;var L=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],H=function(t,e){var n=I.length,i=t.constructor,o=g.isFunction(i)&&i.prototype||a,r="constructor";for(w(t,r)&&!g.contains(e,r)&&e.push(r);n--;)(r=I[n])in t&&t[r]!==o[r]&&!g.contains(e,r)&&e.push(r)};g.keys=function(t){if(!g.isObject(t))return[];if(f)return f(t);var e=[];for(var n in t)w(t,n)&&e.push(n);return L&&H(t,e),e},g.allKeys=function(t){if(!g.isObject(t))return[];var e=[];for(var n in t)e.push(n);return L&&H(t,e),e},g.values=function(t){for(var e=g.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=t[e[o]];return i},g.mapObject=function(t,e,n){e=b(e,n);for(var i=g.keys(t),o=i.length,a={},r=0;r<o;r++){var s=i[r];a[s]=e(t[s],s,t)}return a},g.pairs=function(t){for(var e=g.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=[e[o],t[e[o]]];return i},g.invert=function(t){for(var e={},n=g.keys(t),i=0,o=n.length;i<o;i++)e[t[n[i]]]=n[i];return e},g.functions=g.methods=function(t){var e=[];for(var n in t)g.isFunction(t[n])&&e.push(n);return e.sort()};var z=function(t,e){return function(n){var i=arguments.length;if(e&&(n=Object(n)),i<2||null==n)return n;for(var o=1;o<i;o++)for(var a=arguments[o],r=t(a),s=r.length,p=0;p<s;p++){var c=r[p];e&&void 0!==n[c]||(n[c]=a[c])}return n}};g.extend=z(g.allKeys),g.extendOwn=g.assign=z(g.keys),g.findKey=function(t,e,n){e=b(e,n);for(var i,o=g.keys(t),a=0,r=o.length;a<r;a++)if(e(t[i=o[a]],i,t))return i};var F,R,D=function(t,e,n){return e in n};g.pick=v((function(t,e){var n={},i=e[0];if(null==t)return n;g.isFunction(i)?(e.length>1&&(i=m(i,e[1])),e=g.allKeys(t)):(i=D,e=B(e,!1,!1),t=Object(t));for(var o=0,a=e.length;o<a;o++){var r=e[o],s=t[r];i(s,r,t)&&(n[r]=s)}return n})),g.omit=v((function(t,e){var n,i=e[0];return g.isFunction(i)?(i=g.negate(i),e.length>1&&(n=e[1])):(e=g.map(B(e,!1,!1),String),i=function(t,n){return!g.contains(e,n)}),g.pick(t,i,n)})),g.defaults=z(g.allKeys,!0),g.create=function(t,e){var n=k(t);return e&&g.extendOwn(n,e),n},g.clone=function(t){return g.isObject(t)?g.isArray(t)?t.slice():g.extend({},t):t},g.tap=function(t,e){return e(t),t},g.isMatch=function(t,e){var n=g.keys(e),i=n.length;if(null==t)return!i;for(var o=Object(t),a=0;a<i;a++){var r=n[a];if(e[r]!==o[r]||!(r in o))return!1}return!0},F=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;return("function"===o||"object"===o||"object"==typeof e)&&R(t,e,n,i)},R=function(t,e,n,i){t instanceof g&&(t=t._wrapped),e instanceof g&&(e=e._wrapped);var o=c.call(t);if(o!==c.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return r.valueOf.call(t)===r.valueOf.call(e)}var a="[object Array]"===o;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,p=e.constructor;if(s!==p&&!(g.isFunction(s)&&s instanceof s&&g.isFunction(p)&&p instanceof p)&&"constructor"in t&&"constructor"in e)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return i[l]===e;if(n.push(t),i.push(e),a){if((l=t.length)!==e.length)return!1;for(;l--;)if(!F(t[l],e[l],n,i))return!1}else{var h,f=g.keys(t);if(l=f.length,g.keys(e).length!==l)return!1;for(;l--;)if(h=f[l],!w(e,h)||!F(t[h],e[h],n,i))return!1}return n.pop(),i.pop(),!0},g.isEqual=function(t,e){return F(t,e)},g.isEmpty=function(t){return null==t||(P(t)&&(g.isArray(t)||g.isString(t)||g.isArguments(t))?0===t.length:0===g.keys(t).length)},g.isElement=function(t){return!(!t||1!==t.nodeType)},g.isArray=h||function(t){return"[object Array]"===c.call(t)},g.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},g.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){g["is"+t]=function(e){return c.call(e)==="[object "+t+"]"}})),g.isArguments(arguments)||(g.isArguments=function(t){return w(t,"callee")});var Y=n.document&&n.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof Y&&(g.isFunction=function(t){return"function"==typeof t||!1}),g.isFinite=function(t){return!g.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},g.isNaN=function(t){return g.isNumber(t)&&isNaN(t)},g.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===c.call(t)},g.isNull=function(t){return null===t},g.isUndefined=function(t){return void 0===t},g.has=function(t,e){if(!g.isArray(e))return w(t,e);for(var n=e.length,i=0;i<n;i++){var o=e[i];if(null==t||!l.call(t,o))return!1;t=t[o]}return!!n},g.noConflict=function(){return n._=i,this},g.identity=function(t){return t},g.constant=function(t){return function(){return t}},g.noop=function(){},g.property=function(t){return g.isArray(t)?function(e){return E(e,t)}:y(t)},g.propertyOf=function(t){return null==t?function(){}:function(e){return g.isArray(e)?E(t,e):t[e]}},g.matcher=g.matches=function(t){return t=g.extendOwn({},t),function(e){return g.isMatch(e,t)}},g.times=function(t,e,n){var i=Array(Math.max(0,t));e=m(e,n,1);for(var o=0;o<t;o++)i[o]=e(o);return i},g.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},g.now=Date.now||function(){return(new Date).getTime()};var W={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},G=g.invert(W),U=function(t){var e=function(e){return t[e]},n="(?:"+g.keys(t).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(o,e):t}};g.escape=U(W),g.unescape=U(G),g.result=function(t,e,n){g.isArray(e)||(e=[e]);var i=e.length;if(!i)return g.isFunction(n)?n.call(t):n;for(var o=0;o<i;o++){var a=null==t?void 0:t[e[o]];void 0===a&&(a=n,o=i),t=g.isFunction(a)?a.call(t):a}return t};var q=0;g.uniqueId=function(t){var e=++q+"";return t?t+e:e},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,$={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\u2028|\u2029/g,Z=function(t){return"\\"+$[t]};g.template=function(t,e,n){!e&&n&&(e=n),e=g.defaults({},e,g.templateSettings);var i,o=RegExp([(e.escape||V).source,(e.interpolate||V).source,(e.evaluate||V).source].join("|")+"|$","g"),a=0,r="__p+='";t.replace(o,(function(e,n,i,o,s){return r+=t.slice(a,s).replace(K,Z),a=s+e.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(r+="';\n"+o+"\n__p+='"),e})),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{i=new Function(e.variable||"obj","_",r)}catch(t){throw t.source=r,t}var s=function(t){return i.call(this,t,g)},p=e.variable||"obj";return s.source="function("+p+"){\n"+r+"}",s},g.chain=function(t){var e=g(t);return e._chain=!0,e};var J=function(t,e){return t._chain?g(e).chain():e};g.mixin=function(t){return g.each(g.functions(t),(function(e){var n=g[e]=t[e];g.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),J(this,n.apply(g,t))}})),g},g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=o[t];g.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],J(this,n)}})),g.each(["concat","join","slice"],(function(t){var e=o[t];g.prototype[t]=function(){return J(this,e.apply(this._wrapped,arguments))}})),g.prototype.value=function(){return this._wrapped},g.prototype.valueOf=g.prototype.toJSON=g.prototype.value,g.prototype.toString=function(){return String(this._wrapped)}}()}));vn._;xn('@media screen and (max-width:768px){.pixnet-happix-pilot__coupon-card__wrapper{width:100%;border-radius:20px;background-color:#f6f6f6;overflow:hidden}.pixnet-happix-pilot__coupon-card__content-container{padding:15px;padding-bottom:0}.pixnet-happix-pilot__coupon-card__cover{width:100%}.pixnet-happix-pilot__coupon-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;height:22px;transform:translateY(-2px);-webkit-transform:translateY(-2px);-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 5px;background-color:#ff7674;border-radius:6px;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;vertical-align:middle}.pixnet-happix-pilot__coupon-card__tag:before{display:inline-block;width:18px;height:18px;content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_coupon.svg)}.pixnet-happix-pilot__coupon-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;text-align:justify;color:#000}.pixnet-happix-pilot__coupon-card__description{margin-top:12px;margin-bottom:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a}.pixnet-happix-pilot__coupon-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__btn-link a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;text-decoration:none;line-height:40px}.pixnet-happix-pilot__coupon-card__btn-link a:after{display:block;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg);content:"";height:16px;width:16px;margin-left:3px}.pixnet-happix-pilot__coupon-card__runs-out{min-height:40px;border-top:2px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__runs-out a{display:block;padding:10px 0;color:#a8a9b2;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;letter-spacing:1px;text-decoration:none;line-height:1.83;pointer-events:none;cursor:not-allowed}}@media screen and (min-width:769px){.pixnet-happix-pilot__coupon-card__wrapper{width:100%;border-radius:20px;background-color:#f6f6f6;overflow:hidden}.pixnet-happix-pilot__coupon-card__content-container{padding:15px;padding-bottom:0}.pixnet-happix-pilot__coupon-card__cover{width:100%}.pixnet-happix-pilot__coupon-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;height:22px;transform:translateY(-2px);-webkit-transform:translateY(-2px);-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 5px;background-color:#ff7674;border-radius:6px;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;vertical-align:middle}.pixnet-happix-pilot__coupon-card__tag:before{display:inline-block;width:18px;height:18px;content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_coupon.svg)}.pixnet-happix-pilot__coupon-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;text-align:justify;color:#000}.pixnet-happix-pilot__coupon-card__description{margin-top:12px;margin-bottom:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a}.pixnet-happix-pilot__coupon-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__btn-link a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;text-decoration:none;line-height:40px}.pixnet-happix-pilot__coupon-card__btn-link a:after{display:block;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg);content:"";height:16px;width:16px;margin-left:3px}.pixnet-happix-pilot__coupon-card__runs-out{min-height:40px;border-top:2px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__runs-out a{display:block;padding:10px 0;color:#a8a9b2;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;letter-spacing:1px;text-decoration:none;line-height:1.83;pointer-events:none;cursor:not-allowed}}');var kn=function(t){function e(t,n){return Z(this,e),Ce(this,Ae(e).call(this,t,n))}return je(e,Ve),tt(e,[{key:"_getImageHtml",value:function(){var t=this.getCssPrefix();return this.props.cover?'<img class="'.concat(t,'__coupon-card__cover" src="').concat(this.props.cover,'">'):""}},{key:"_getLinkText",value:function(){switch(this.props.state){case"ACCEPTED":return"已領取 <div>可到 email 查看優惠</div>";case"PENDING":return"免費領取";case"UNAVAILABLE":return"已領完";default:return""}}},{key:"_getLinkTextStyle",value:function(){var t=this.getCssPrefix(),e=this.props.state;return"".concat(t,"PENDING"===e?"__coupon-card__btn-link":"__coupon-card__runs-out")}},{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,"__coupon-card__").concat(this.props.id,'">\n                <div class="').concat(t,'__coupon-card__wrapper">\n                    ').concat(this._getImageHtml(),'\n                    <div class="').concat(t,'__coupon-card__content-container">\n                        <div>\n                            <span class="').concat(t,'__coupon-card__tag">').concat(this.props.tag,'</span>\n                            <span class="').concat(t,'__coupon-card__title">').concat(this.props.title,'</span>\n                        </div>\n                        <div class="').concat(t,'__coupon-card__description">').concat(this.props.description,'</div>\n                        <div class="').concat(this._getLinkTextStyle(),'">\n                            <a  \n                                href="').concat(this.props.link,'" target="_blank">\n                                ').concat(this._getLinkText(),"\n                            </a>    \n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")}},{key:"bindEvents",value:function(){var t=this;this.buttonLink.bindEvent("click",vn.debounce((function(){ln({category:"pilot-happixPopup",action:"positionClick",label:t.props.msg_pos})}),100))}},{key:"getElements",value:function(){var t=this.getCssPrefix();this.couponCardElement=$e.getElementByPostfix("coupon-card__".concat(this.props.id)),this.buttonLink=$e.wrapper(document.querySelector(".".concat(t,"__coupon-card__btn-link > a")))}},{key:"render",value:function(){return this.containerElement.appendChild($e.createElement(this.getTemplate())),this.getElements(),this.bindEvents(),this}}]),e}();xn("@media screen and (max-width:768px){.pixnet-happix-pilot__special-notification{position:fixed;right:10px;bottom:47px;left:10px;width:calc(100% - 20px);margin:auto}.pixnet-happix-pilot__special-notification.hidden{opacity:0;-webkit-transform:translateY(52px);transform:translateY(52px)}.pixnet-happix-pilot__special-notification__wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:50px;background:rgba(0,0,0,.8);border-radius:20px;cursor:pointer}.pixnet-happix-pilot__special-notification__icon-container{position:relative;width:58px;-ms-flex-item-align:end;align-self:flex-end}.pixnet-happix-pilot__special-notification__icon-container>*{position:absolute;bottom:0;left:10px;width:60px}.pixnet-happix-pilot__special-notification__message{-webkit-box-flex:1;-ms-flex:1;flex:1;max-height:36px;padding-left:20px;color:#fff;font-family:PingFang TC;font-size:13px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.9px;text-overflow:clip}.pixnet-happix-pilot__special-notification__separator{height:25px;margin-left:11px;border-left:1px solid hsla(0,0%,100%,.2)}.pixnet-happix-pilot__special-notification__close-button{width:20px;margin-right:15px;margin-left:15px;cursor:pointer}}@media screen and (min-width:769px){.pixnet-happix-pilot__special-notification{position:fixed;right:0;bottom:48px;left:0;width:100%;margin:auto;-webkit-transition:all .4s;transition:all .4s}.pixnet-happix-pilot__special-notification.hidden{opacity:0;-webkit-transform:translateY(52px);transform:translateY(52px)}.pixnet-happix-pilot__special-notification__wrapper{position:absolute;right:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:300px;height:50px;background:rgba(0,0,0,.8);border-radius:20px;cursor:pointer}.pixnet-happix-pilot__special-notification__icon-container{position:relative;width:58px;-ms-flex-item-align:end;align-self:flex-end}.pixnet-happix-pilot__special-notification__icon-container>*{position:absolute;bottom:0;left:10px;width:60px}.pixnet-happix-pilot__special-notification__message{-webkit-box-flex:1;-ms-flex:1;flex:1;max-height:36px;padding-left:20px;color:#fff;font-family:PingFang TC;font-size:13px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.9px;text-overflow:clip}.pixnet-happix-pilot__special-notification__separator{height:25px;margin-left:11px;border-left:1px solid hsla(0,0%,100%,.2)}.pixnet-happix-pilot__special-notification__close-button{width:20px;margin-right:15px;margin-left:15px;cursor:pointer}}");var yn=function(t){function e(t){return Z(this,e),Ce(this,Ae(e).call(this,t))}return je(e,Ve),tt(e,[{key:"getAvatarImg",value:function(){return{visa:"visa_logo.png"}[On.rules.ruleType]}},{key:"getTemplates",value:function(){var t=this.getCssPrefix();return'\n            <div\n                class="'.concat(t,'__special-notification hidden"\n                style="max-width: ').concat(on.getOptions().getPilotWidth(),'px"\n            >\n            </div>\n        ')}},{key:"getElements",value:function(){this.specialNotificationElement=$e.getElementByPostfix("special-notification"),this.closeButtonElement=this.specialNotificationElement.getElementByPostfix("special-notification__close-button")}},{key:"bindEvents",value:function(){var t=this;this.closeButtonElement.bindEvent("click",(function(e){t.containerElement.fireEvent("close"),On.sendAnalytic({category:"pilot_w_dialog",action:"click_collapse_button_to_close_dialog"}),e.stopPropagation()})),this.specialNotificationElement.bindEvent("click",(function(){On.showSpecialMessenger(),On.sendAnalytic({category:"pilot_w_dialog",action:"click_dialog_to_show_missions"})}))}},{key:"hide",value:function(){return this.specialNotificationElement.addClass("hidden"),this}},{key:"show",value:function(){return this.specialNotificationElement.setStyle("transition","all .4s").removeClass("hidden"),this}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplates()),this.getElements(),this.bindEvents(),this}}]),e}();xn(".pixnet-happix-pilot__message-card{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.pixnet-happix-pilot__message-card__avatar{width:36px}.pixnet-happix-pilot__message-card__conversation{width:10px}.pixnet-happix-pilot__message-card__content{-webkit-box-flex:1;-ms-flex:1;flex:1;padding:15px;background:#f6f6f6;border-radius:20px;border-top-left-radius:0;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px}.pixnet-happix-pilot__message-card__highlight{background-color:#fff4cd}");var wn=function(t){function e(t,n){return Z(this,e),Ce(this,Ae(e).call(this,t,n))}return je(e,Ve),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e="".concat(t,"__message-card__highlight"),n=this.props.type;return'\n            <div class="'.concat(t,'__message-card">\n                <img\n                    class="').concat(t,'__message-card__avatar"\n                    src="').concat(Fe,"/").concat("special"===n?{visa:"visa.png"}[On.rules.ruleType]:"happix_head.svg",'"\n                />\n                <img\n                    class="').concat(t,'__message-card__conversation"\n                    src="').concat(Fe,'/conversation_yellow.svg"\n                />\n                <div class="').concat(t,"__message-card__content ").concat(e,'">').concat(this.props.message,"</div>\n            </img>\n        ")}},{key:"getElements",value:function(){this.messageCardElement=$e.getElementByPostfix("message-card")}},{key:"render",value:function(){return this.containerElement.appendChild($e.createElement(this.getTemplate())),this.getElements(),this}}]),e}(),En=function(){var t=Number(qe.$mobile_screen_max_width.replace("px",""));return window.innerWidth<=t};xn('@media screen and (max-width:768px){.pixnet-happix-pilot__task-card__wrapper{display:block;overflow:hidden;text-decoration:none;background-color:#f6f6f6;border-radius:20px}.pixnet-happix-pilot__task-card__wrapper:hover{text-decoration:none}.pixnet-happix-pilot__task-card__content-container{padding:15px;padding-bottom:0}.pixnet-happix-pilot__task-card__highlight{background-color:#fff4cd}.pixnet-happix-pilot__task-card__cover{display:block;width:100%}.pixnet-happix-pilot__task-card__cover-container{position:relative}.pixnet-happix-pilot__task-card__countdown{position:absolute;bottom:0;width:100%;padding:2px 15px;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:rgba(0,0,0,.5)}.pixnet-happix-pilot__task-card__countdown:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_time.svg);display:inline-block;width:14px;height:14px;margin-right:5px;vertical-align:middle;-o-object-fit:contain;object-fit:contain;-webkit-transform:translateY(-10%);transform:translateY(-10%)}.pixnet-happix-pilot__task-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:22px;padding:0 5px;vertical-align:middle;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;-webkit-transform:translateY(-2px);transform:translateY(-2px);background-color:#66b3d9;border-radius:6px}.pixnet-happix-pilot__task-card__tag:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_task.svg);display:inline-block;width:18px;height:18px}.pixnet-happix-pilot__task-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;text-align:justify;color:#000}.pixnet-happix-pilot__task-card__description{overflow:hidden;max-height:61px;height:auto;margin-top:12px;margin-bottom:15px;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;-moz-text-overflow:ellipsis;word-wrap:break-word}.pixnet-happix-pilot__task-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__task-card__btn-link span{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;line-height:40px}.pixnet-happix-pilot__task-card__btn-link span:after{content:"";display:block;height:16px;width:16px;margin-left:3px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg)}}@media screen and (min-width:769px){.pixnet-happix-pilot__task-card__wrapper{display:block;overflow:hidden;text-decoration:none;background-color:#f6f6f6;border-radius:20px}.pixnet-happix-pilot__task-card__wrapper:hover{text-decoration:none}.pixnet-happix-pilot__task-card__content-container{padding:15px;padding-bottom:0}.pixnet-happix-pilot__task-card__highlight{background-color:#fff4cd}.pixnet-happix-pilot__task-card__cover{display:block;width:100%}.pixnet-happix-pilot__task-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:22px;padding:0 5px;vertical-align:middle;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:#66b3d9;border-radius:6px;-webkit-transform:translateY(-2px);transform:translateY(-2px)}.pixnet-happix-pilot__task-card__tag:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_task.svg);display:inline-block;width:18px;height:18px}.pixnet-happix-pilot__task-card__cover-container{position:relative}.pixnet-happix-pilot__task-card__countdown{position:absolute;width:100%;padding:2px 15px;bottom:0;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:rgba(0,0,0,.5)}.pixnet-happix-pilot__task-card__countdown:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_time.svg);display:inline-block;width:14px;height:14px;margin-right:5px;vertical-align:middle;-o-object-fit:contain;object-fit:contain;-webkit-transform:translateY(-10%);transform:translateY(-10%)}.pixnet-happix-pilot__task-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;color:#000;text-align:justify}.pixnet-happix-pilot__task-card__description{overflow:hidden;height:auto;max-height:61px;margin-top:12px;margin-bottom:15px;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;-moz-text-overflow:ellipsis;word-wrap:break-word}.pixnet-happix-pilot__task-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__task-card__btn-link span{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;line-height:40px}.pixnet-happix-pilot__task-card__btn-link span:after{content:"";display:block;height:16px;width:16px;margin-left:3px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg)}}');var Cn=function(t){function e(t,n,i,o){var a;return Z(this,e),(a=Ce(this,Ae(e).call(this,t,n))).messenger=o,a.position=i,a}return je(e,Ve),tt(e,[{key:"_getImageHtml",value:function(){var t=this.getCssPrefix(),e=En();return this.props.cover?'\n            <img class="'.concat(t,'__task-card__cover"\n                src="').concat(e?this.props.cover:un(this.props.cover,254,127),'"\n            >\n        '):""}},{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=2===this.props.msg_pos?"".concat(t,"__task-card__highlight"):"";return'\n            <a class="'.concat(t,"__task-card__wrapper ").concat(t,"__task-card__").concat(this.position,'"\n                href="').concat(this.props.link,'" target="_blank">\n                <div class="').concat(t,'__task-card__cover-container">\n                    ').concat(this._getImageHtml(),'\n                </div>\n                <div class="').concat(t,"__task-card__content-container ").concat(e,'">\n                    <div>\n                        <span class="').concat(t,'__task-card__tag">').concat(this.props.tag,'</span>\n                        <span class="').concat(t,'__task-card__title">').concat(this.props.title,'</span>\n                    </div>\n                    <div class="').concat(t,'__task-card__description">').concat(this.props.description,'</div>\n                    <div class="').concat(t,'__task-card__btn-link">\n                        <span>了解更多</span>\n                    </div>\n                </div>\n            </a>\n        ')}},{key:"bindEvents",value:function(){var t=this;this.taskCardElement.bindEvent("click",vn.debounce((function(){On.sendAnalytic({category:"pilot_w_special_missions",action:"click_mission_".concat(t.position,"_to_external_w_max_imp_").concat(t.messenger.maxImpressionTask)})}),100))}},{key:"bindActiveViewEvent",value:function(){var t,e=this,n=this.taskCardElement.getElement(),i={root:null,rootMargin:"0px",threshold:1},o=function(i){i.forEach((function(i){i.isIntersecting&&1===i.intersectionRatio&&(On.sendAnalytic({category:"pilot_w_special_missions",action:"imp_of_mission_".concat(e.position,"_to_external_URL")}),e.messenger.maxImpressionTask=e.position>e.messenger.maxImpressionTask?e.position:e.messenger.maxImpressionTask,t.unobserve(n))}))};if("undefined"==typeof IntersectionObserver){var a=document.createElement("script");a.addEventListener("load",(function(){(t=new IntersectionObserver(o,i)).observe(n)})),a.src="http://s.pixfs.net/polyfill/intersection-observer.js",document.getElementsByTagName("head")[0].appendChild(a)}else(t=new IntersectionObserver(o,i)).observe(n)}},{key:"getElements",value:function(){this.taskCardElement=this.containerElement.getElementByPostfix("task-card__".concat(this.position))}},{key:"render",value:function(){return this.containerElement.appendChild($e.createElement(this.getTemplate())),this.getElements(),this.bindEvents(),this.bindActiveViewEvent(),this}}]),e}();xn(".pixnet-happix-pilot__weather-card{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;color:#000}.pixnet-happix-pilot__weather-card>:not(:first-child){margin-left:8px}.pixnet-happix-pilot__weather-card img{width:40px}.pixnet-happix-pilot__weather-card span{font-family:PingFang TC;font-size:16px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1.2px;text-overflow:ellipsis}");var Sn=function(t){function e(t,n){return Z(this,e),Ce(this,Ae(e).call(this,t,n))}return je(e,Ve),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__weather-card">\n                <img src="').concat(Ge[this.props.type],'" />\n                <span>').concat(this.getTimeGreeting(),"，").concat(Ue[this.props.type],"</span>\n            </div>\n        ")}},{key:"getTimeGreeting",value:function(){var t=(new Date).getHours();return t>4&&t<11?"早安":t>10&&t<17?"午安":"晚安"}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this}}]),e}();xn('@media screen and (max-width:768px){.pixnet-happix-pilot__special-messenger{position:fixed;top:0;right:0;bottom:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);z-index:2;will-change:opacity}.pixnet-happix-pilot__special-messenger.hidden{opacity:0;pointer-events:none}.pixnet-happix-pilot__special-messenger__wrapper{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;-webkit-transition:-webkit-transform .4s;transition:-webkit-transform .4s;transition:transform .4s;transition:transform .4s,-webkit-transform .4s;will-change:transform}.pixnet-happix-pilot__special-messenger__wrapper.hidden{-webkit-transform:translateY(100%);transform:translateY(100%)}.pixnet-happix-pilot__special-messenger__wrapper .pixnet-happix-pilot__happix-messenger__avatar{position:absolute;top:47px;right:15px;z-index:1;cursor:pointer}.pixnet-happix-pilot__special-messenger__avatar{position:absolute;top:47px;right:83px;width:70px;z-index:2;cursor:pointer}.pixnet-happix-pilot__special-messenger__content{position:absolute;top:110px;right:0;bottom:0;left:0;width:100%;height:calc(100% - 110px);padding:15px 0;background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;overflow-y:auto;-webkit-overflow-scrolling:touch;z-index:1;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/visa_sakura_1.png),url(https://s.pixfs.net/common/pixhappix-ui-module/images/visa_sakura_2.png);-webkit-animation:happix-special-sakura 10s linear infinite;animation:happix-special-sakura 10s linear infinite}.pixnet-happix-pilot__special-messenger__content>*{margin-right:20px;margin-left:15px}.pixnet-happix-pilot__special-messenger__content__date-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;margin-right:0;margin-left:0;color:#81828e;font-family:PingFang TC;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.8px}.pixnet-happix-pilot__special-messenger__content__date-container:before{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-right:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__special-messenger__content__date-container:after{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__special-messenger__content__special-container{margin-top:20px}.pixnet-happix-pilot__special-messenger__content__card-container>*,.pixnet-happix-pilot__special-messenger__content__coupon-container>*,.pixnet-happix-pilot__special-messenger__content__task-container>*{margin-top:15px;margin-left:46px}.pixnet-happix-pilot__special-messenger__content__card-container>:first-child,.pixnet-happix-pilot__special-messenger__content__coupon-container>:first-child,.pixnet-happix-pilot__special-messenger__content__task-container>:first-child{margin-top:35px;margin-left:0}.pixnet-happix-pilot__special-messenger__fixed{position:fixed}.pixnet-happix-pilot__special-messenger__close_button{position:absolute;top:0;left:0;display:inline-block;width:24px;height:24px;margin:0;padding:10px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_close.svg) 50% no-repeat;cursor:pointer}}@media screen and (min-width:769px){.pixnet-happix-pilot__special-messenger{position:fixed;top:180px;right:0;bottom:0;left:0;width:100%;height:calc(100% - 180px);margin:auto;-webkit-transition:all .4s;transition:all .4s}.pixnet-happix-pilot__special-messenger:focus{outline:none}.pixnet-happix-pilot__special-messenger.hidden{opacity:0;-webkit-transform:translateY(100%);transform:translateY(100%);pointer-events:none}.pixnet-happix-pilot__special-messenger.dangling{bottom:46px;height:calc(100% - 226px)}.pixnet-happix-pilot__special-messenger__wrapper{position:absolute;top:0;right:0;bottom:0;width:335px;height:100%}.pixnet-happix-pilot__special-messenger__avatar{position:absolute;top:3px;right:67px;width:70px;z-index:2;cursor:pointer;pointer-events:auto}.pixnet-happix-pilot__special-messenger__content{position:absolute;top:74px;right:0;bottom:0;left:0;width:100%;padding:15px 0;background:#fff;border-top-right-radius:6px;border-top-left-radius:6px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 4px 0 rgba(0,0,0,.4);box-shadow:0 0 4px 0 rgba(0,0,0,.4);overflow-y:auto;-webkit-overflow-scrolling:touch;z-index:1;pointer-events:auto;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/visa_sakura_1.png),url(https://s.pixfs.net/common/pixhappix-ui-module/images/visa_sakura_2.png);-webkit-animation:happix-special-sakura 10s linear infinite;animation:happix-special-sakura 10s linear infinite}.pixnet-happix-pilot__special-messenger__content>*{margin-right:20px;margin-left:15px}.pixnet-happix-pilot__special-messenger__content__date-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;margin-right:0;margin-left:0;color:#81828e;font-family:PingFang TC;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.8px}.pixnet-happix-pilot__special-messenger__content__date-container:before{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-right:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__special-messenger__content__date-container:after{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__special-messenger__content__happix-container{margin-top:20px}.pixnet-happix-pilot__special-messenger__content__card-container>*,.pixnet-happix-pilot__special-messenger__content__coupon-container>*,.pixnet-happix-pilot__special-messenger__content__task-container>*{margin-top:15px;margin-left:46px}.pixnet-happix-pilot__special-messenger__content__card-container>:first-child,.pixnet-happix-pilot__special-messenger__content__coupon-container>:first-child,.pixnet-happix-pilot__special-messenger__content__task-container>:first-child{margin-top:35px;margin-left:0}.pixnet-happix-pilot__special-messenger-mask{opacity:0;will-change:opacity}.pixnet-happix-pilot__special-messenger-mask.show{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);opacity:1}}.article-body--sakura-animation,.article-body--sakura-animation .article-content-inner{position:relative}.article-body--sakura-animation:before{content:"";display:block;position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/visa_sakura_1.png),url(https://s.pixfs.net/common/pixhappix-ui-module/images/visa_sakura_2.png);-webkit-animation:happix-article-sakura 10s linear;animation:happix-article-sakura 10s linear;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes happix-special-sakura{0%{background-position:0 0,0 0}50%{background-position:500px 500px,100px 200px}to{background-position:900px 1000px,200px 400px}}@keyframes happix-special-sakura{0%{background-position:0 0,0 0}50%{background-position:500px 500px,100px 200px}to{background-position:900px 1000px,200px 400px}}@-webkit-keyframes happix-article-sakura{0%{background-position:0 0,0 0}50%{background-position:500px 500px,100px 200px}to{background-position:900px 1000px,200px 400px;opacity:0}}@keyframes happix-article-sakura{0%{background-position:0 0,0 0}50%{background-position:500px 500px,100px 200px}to{background-position:900px 1000px,200px 400px;opacity:0}}');var Pn=function(t){function e(t,n){var i;return Z(this,e),(i=Ce(this,Ae(e).call(this,t,n))).saveWindowScroll(),i.maxImpressionTask=1,i.closeSpecialMessager=i.closeSpecialMessager.bind(Ee(Ee(i))),i.openHappixMessager=i.openHappixMessager.bind(Ee(Ee(i))),i}return je(e,Ve),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=this.props&&this.props.dangling,n=(new Date).toLocaleDateString("zh-TW",{month:"long",day:"numeric",weekday:"short"});return'\n            <div class="'.concat(t,'__special-messenger-mask"></div>\n            <div\n                class="').concat(t,"__special-messenger hidden ").concat(e?"dangling":"",'"\n                style="max-width: ').concat(on.getOptions().getPilotWidth(),'px;"\n            >\n                <div class="').concat(t,'__special-messenger__wrapper hidden">\n                  <img\n                      class="').concat(t,'__special-messenger__avatar"\n                      src="').concat(Fe,"/").concat({visa:"visa_chat.png"}[On.rules.ruleType],'"\n                  />\n                  <img\n                      class="').concat(t,'__happix-messenger__avatar"\n                      src="').concat(Fe,'/btn_happix_ufo_open.png"\n                      srcset="').concat(Fe,"/btn_happix_ufo_open@2x.png 2x,\n                                ").concat(Fe,'/btn_happix_ufo_open@3x.png 3x"\n                  />\n                  <div class="').concat(t,'__special-messenger__content">\n                      ').concat(En()?'<span class="'.concat(t,'__special-messenger__close_button"></span>'):"",'\n                      <div class="').concat(t,'__special-messenger__content__weather-container"></div>\n                      <div class="').concat(t,'__special-messenger__content__date-container">\n                          ').concat(n,'\n                      </div>\n                      <div class="').concat(t,'__special-messenger__content__special-container"></div>\n                      <div class="').concat(t,'__special-messenger__content__coupon-container"></div>\n                      <div class="').concat(t,'__special-messenger__content__task-container"></div>\n                  </div>\n                </div>\n            </div>\n        ')}},{key:"getElements",value:function(){this.bodyElement=$e.getElementBySelector("body"),this.specialMaskElement=$e.getElementByPostfix("special-messenger-mask"),this.specialMessengerElement=$e.getElementByPostfix("special-messenger"),this.specialWrapperElement=this.specialMessengerElement.getElementByPostfix("special-messenger__wrapper"),this.happixAvatarElement=this.specialMessengerElement.getElementByPostfix("happix-messenger__avatar"),this.specialAvatarElement=this.specialMessengerElement.getElementByPostfix("special-messenger__avatar"),this.specialContentElement=this.specialMessengerElement.getElementByPostfix("special-messenger__content"),this.weatherContainerElement=this.specialMessengerElement.getElementByPostfix("special-messenger__content__weather-container"),this.specialContainerElement=this.specialMessengerElement.getElementByPostfix("special-messenger__content__special-container"),this.couponContainerElement=this.specialMessengerElement.getElementByPostfix("special-messenger__content__coupon-container"),this.taskContainerElement=this.specialMessengerElement.getElementByPostfix("special-messenger__content__task-container"),this.specialCloseButtonElement=this.specialMessengerElement.getElementByPostfix("special-messenger__close_button")}},{key:"bindEvents",value:function(){this.specialMaskElement.bindEvent("click",this.closeSpecialMessager),this.specialMessengerElement.bindEvent("click",this.closeSpecialMessager),this.happixAvatarElement.bindEvent("click",this.openHappixMessager),this.specialAvatarElement.bindEvent("click",this.closeSpecialMessager),En()&&this.specialCloseButtonElement.bindEvent("click",this.closeSpecialMessager),this.specialContentElement.bindEvent("click",(function(t){t.stopPropagation()}))}},{key:"closeSpecialMessager",value:function(t){t.stopPropagation(),this.hide(),On.sendAnalytic({category:"pilot_w_special_missions",action:"close_special_missions"}),document.querySelector("#main .article-body").classList.add("article-body--sakura-animation")}},{key:"openHappixMessager",value:function(t){t.stopPropagation(),this.hide(),On.showHappixMessenger(),On.sendAnalytic({category:"pilot_w_special_missions",action:"click_on_happix_tab"})}},{key:"isTopLessThanWindowBottom",value:function(t){return t.element.getBoundingClientRect().top<window.innerHeight}},{key:"setData",value:function(t){var e=this,n=t.weather,i=t.memberInfo,o=void 0===i?{}:i,a=t.task;this.weatherCard=this.createWeatherCard({type:n}),this.happixCard=this.createHappixCard({name:o.display_name,msg_pos:1,type:"special"}),a&&(this.taskMessageCard=this.createTaskMessageCard({message:a.intro,type:"special"}),this.taskCards=a.items.map((function(t,n){var i=n+1;return e.createTaskCard(t,i)})))}},{key:"createWeatherCard",value:function(t){return new Sn(this.weatherContainerElement,t).render()}},{key:"createHappixCard",value:function(t){return new jn(this.specialContainerElement,t).render()}},{key:"createTaskMessageCard",value:function(t){return new wn(this.taskContainerElement,t).render()}},{key:"createTaskCard",value:function(t,e){return new Cn(this.taskContainerElement,t,e,this).render()}},{key:"saveWindowScroll",value:function(){this.scroll={x:window.scrollX,y:window.scrollY}}},{key:"isMessengerVisible",value:function(){return!this.specialMessengerElement.hasClass("hidden")}},{key:"hide",value:function(){if(this.isMessengerVisible()){var t=this.getCssPrefix();this.specialMessengerElement.addClass("hidden"),this.specialWrapperElement.addClass("hidden"),this.specialMaskElement.removeClass("show"),En()&&(this.bodyElement.removeClass("".concat(t,"__special-messenger__fixed")).setStyle("overflow",null),window.scroll(this.scroll.x,this.scroll.y))}return this}},{key:"show",value:function(){if(!this.isMessengerVisible()){var t=this.getCssPrefix();this.specialMessengerElement.setStyle("transition","all .4s").removeClass("hidden"),this.specialWrapperElement.removeClass("hidden"),this.specialMaskElement.setStyle("transition","opacity .4s").addClass("show"),this.specialContentElement.scrollToTop(),En()&&(this.saveWindowScroll(),this.bodyElement.addClass("".concat(t,"__special-messenger__fixed")).setStyle("overflow","hidden")),this.specialMessengerElement.getElement().focus()}return this}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this}}]),e}(),Tn={EC:{notification:"安心網購無國界，刷Visa購物樂趣無限大！",contentMessage:"很高興見到你！今天飄櫻花雨有驚喜？刷Visa完美迫降你的生活消費！",intro:"下單刷Visa，全球購物零時差！",items:[{cover:"".concat(Fe,"/visa-task/EC.png"),description:"",end_time:1572623940,link:"https://falcon.pixnet.net/ad/rc?i=2b8867949316d0454c9de7c9e6903d1a",msg_pos:1,tag:"盡享優惠",title:"安心網購無國界，刷Visa購物樂趣無限大！"}]},Food:{notification:"安心網購無國界，刷Visa購物樂趣無限大！",contentMessage:"很高興見到你！今天飄櫻花雨有驚喜？刷Visa完美迫降你的生活消費！",intro:"宅在家懶出門？刷Visa美食直送到家！",items:[{cover:"".concat(Fe,"/visa-task/food.png"),description:"",end_time:1572623940,link:"https://falcon.pixnet.net/ad/rc?i=ae76693776d38e3c23789a0bbb8b0ce5",msg_pos:1,tag:"美味直達",title:"不是你太懶，是刷Visa太方便！foodpanda首購享5折優惠！"}]},Gaming:{notification:"安心網購無國界，刷Visa購物樂趣無限大！",contentMessage:"很高興見到你！今天飄櫻花雨有驚喜？刷Visa完美迫降你的生活消費！",intro:"宅在家電玩咖，Visa陪你奮戰到底！",items:[{cover:"".concat(Fe,"/visa-task/gaming.png"),description:"",end_time:1572623940,link:"https://falcon.pixnet.net/ad/rc?i=91844c326639544a84477a1dec38fed9",msg_pos:1,tag:"儲值神卡",title:"電玩實況主神反應下線？原來My\bCard刷Visa儲值有超補限時優惠！"}]}},Mn={EC:["Amazon","AMAZON","amazon","亞馬遜","Shopbop","shopbop","SHOPBOP","Harrods","harrods","HARRODS","space.*nk","Space.*nk","Space.*NK","SPACE.*NK","Mankind","mankind","Net.*A.*Porter","net.*a.*porter","NEY.*A.*PORTER","Mr.*Porter","MR.*PORTER","Selfridges","selfridges","Matchesfashion","MATCHESFASHION","Mytheresa","mytheresa","MYTHERESA","Rue.*la.*la","Rue.*La.*La","RUE.*LA.*LA","Gilt","GILT","gilt","ASOS","asos","Asos","Forzieri","forzieri","FORZIERI","eBay","EBAY","ebay","Farfetch","farfetch","FARFETCH","Luisaviaroma","luisaviaroma","LUISAVIAROMA","Sephora","sephora","SEPHORA","Zalora","zalora","ZALORA","Beautylish","beautylish","Gmarket","gmarket","GMARKET","cult.*beauty","Cult.*Beauty","CULT.*BEAUTY","beauty.*expert","Beauty.*Expert","BEAUTY.*EXPERT","beauty.*bay","Beauty.*Bay","BEAUTY.*BAY","ULTA.*Beauty","ULTA.*beauty","ulta.*beauty","SHEIN","shein","Shein","ROMWE","romwe","Romwe","REVOLVE","revolve","Revolve","agoda","AGODA","Agoda","Hotels.*com","Hotels.*Com","hotels.*com","HOTELS.*COM","booking.*com","Booking.*Com","Booking.*com","BOOKING.*COM","Expedia","EXPEDIA","expedia","SSENSE","ssense","SSense","Ssense","dover.*street.*market","Dover.*Street.*Market","DOVER.*STREET.*MARKET","Need.*Supply.*Co","need.*supply.*co","NEED.*SUPPLY.*CO","THE.*HUT","The.*Hut","the.*hut","COGGLES","Coggles","coggles","STYLEBOP","Stylebop","stylebop","YOOX","Yoox","yoox","淘寶","天貓","shopback","ShopBack","SHOPBACK","購物返利","現金回饋","KKBOX","Kkbox","kkbox","日本樂天","京東","Gmarket","gmarket","GMARKET","iherb","iHerb","IHERB","buy.*buy.*BABY","Buy.*Buy.*BABY","buy.*buy.*baby","GoDaddy","godaddy","GODADDY","EAST.*DANE","East.*Dane","east.*dane","lookfantasic","LookFantasic","Lookfantasic","LOOKFANTASIC","MYBAG","MyBag","mybag","REBECCA.*MINKOFF","Rebecca.*Minkoff","ALL.*SAINTS","All.*Saints","all.*saints","Abercrombie","abercrombie","alex.*and.*alexa","Alex.*and.*Alexa","allsole","Allsole","AllSole","AMERICAN.*EAGLE","American.*Eagle","ANN.*TAYLOR","BANANA.*REPUBLIC","Banana.*Republic","Barneys.*New.*York","bloomingdale","Bloomingdale","Bluefly","bluefly","bluehost","Bluehost","Daniel.*Wellington","DISNEY.*STORE","Disney.*Store","DOROTHY.*PERKINS","DVF","Hollister.*Co","hollister.*co","HostGator","hostGator","Jack.*Wills","kipling","Kipling","Folli.*Follie","FOREVER.*21","FORWARD.*by.*Elyse","FORZIERI","GILT","meli.*melo","NORDSTROM","Saks.*Fifth.*Avenue","Sam.*Edelman","SkinStore","Sugarhosts","Superdry","superdry","SUPERDRY","The.*Cambridge.*Satchel","THE.*OUTNET","TOPMAN","topman","Topman","TOPSHOP","topman","trivago","Trivago","TRIVAGO","攜程","ctrip","Ctrip","CTRIP","刷卡優惠","海外集運","訂房折扣碼","刷卡折扣","國際運費","lookfantastic","LookFantastic","LOOKFANTASTIC"],Food:["foodpanda","FOODPANDA","FoodPanda","Foodpanda","美食熊貓","熊貓外送","美食外送","空腹熊貓","外送App","訂餐","外送"],Gaming:["Mycard","mycard","MyCard","MYCARD","myCard","手遊","電玩","遊戲.*點數","點數.*遊戲","點數.*儲值","儲值.*點數","虛寶"]},An=["ironlotus168.pixnet.net/blog/post/469287338","jc1031.pixnet.net/blog/post/351834814","rockyrocket12.pixnet.net/blog/post/467018018","mosideology.pixnet.net/blog/post/320621930","u0xu.pixnet.net/blog/post/358711343","tpmlcog02.pixnet.net/blog/post/35268706","girlshopwoo.pixnet.net/blog/post/463470605","hhdie0208tw.pixnet.net/blog/post/469428194","hannn246.pixnet.net/blog/post/403779089","timemen.pixnet.net/blog/post/333670111","qei40961.pixnet.net/blog/post/305183420","adago.pixnet.net/blog/post/3309797","jourdeness1989.pixnet.net/blog/post/228993128","bellafoot.pixnet.net/blog/post/280851296","ivy034022555.pixnet.net/blog/post/68750390","lov27967.pixnet.net/blog/post/305437871","elisashop.pixnet.net/blog/post/68699501","elisashop.pixnet.net/blog/post/68699321","jerry902226.pixnet.net/blog/post/279339812","giabeauty.pixnet.net/blog/post/97147668","armyhou22.pixnet.net/blog/post/2824127","quincearoma.pixnet.net/blog/post/322405452","joanlibaby.pixnet.net/blog/post/214934775","gogochiai.pixnet.net/blog/post/43564696","elisashop.pixnet.net/blog/post/68699564","naturetech.pixnet.net/blog/post/3099077","chachalai.pixnet.net/blog/post/311081753","lingyinglove.pixnet.net/blog/post/44407777","sex1014004.pixnet.net/blog/post/61120195","fannyin01.pixnet.net/blog/post/217156256","farashajamil.pixnet.net/blog/post/52886208","shadow810105.pixnet.net/blog/post/48869742","bjobljacdyv.pixnet.net/blog/post/189623358","drhsieh2007.pixnet.net/blog/post/321586328","glowmaxtaiwan.pixnet.net/blog/post/96343534","naturetech.pixnet.net/blog/post/3623573","niceway60839.pixnet.net/blog/post/350982202","qei40961.pixnet.net/blog/post/305546915","kurtz120.pixnet.net/blog/post/64774939","niceway60839.pixnet.net/blog/post/349706968","alma750615.pixnet.net/blog/post/30733232","shdow0717.pixnet.net/blog/post/46926724","niceway60839.pixnet.net/blog/post/349651021","sex1014004.pixnet.net/blog/post/70657172","vedaroma5897.pixnet.net/blog/post/320009174","drali22517635.pixnet.net/blog/post/218275116","drtsao401225.pixnet.net/blog/post/302591729","jillbear0303.pixnet.net/blog/post/397856524","wlfbw825k4.pixnet.net/blog/post/201495463","morefun0102.pixnet.net/blog/post/456859610","supinaz1018.pixnet.net/blog/post/321955958","a5160828.pixnet.net/blog/post/47218699","xoxvov2000.pixnet.net/blog/post/218300739","rjr97685.pixnet.net/blog/post/305436605","hsuan0615.pixnet.net/blog/post/43637638","rjr97685.pixnet.net/blog/post/305547539","t12356722.pixnet.net/blog/post/219125907","qei40961.pixnet.net/blog/post/305546996","rachelaa0503.pixnet.net/blog/post/40899049","drtsao401225.pixnet.net/blog/post/305063399","lov27967.pixnet.net/blog/post/305331422","arcflash.pixnet.net/blog/post/469296845","happymommy.pixnet.net/blog/post/120223326","cherryshen71.pixnet.net/blog/post/358809902","cherryshen71.pixnet.net/blog/post/358809920","health888.pixnet.net/blog/post/120238327","atomy4asia.pixnet.net/blog/post/322548092","ca701225.pixnet.net/blog/post/248805841","atomy4asia.pixnet.net/blog/post/322395332","ads9226.pixnet.net/blog/post/228948599","selina888613.pixnet.net/blog/post/218240460","kiwilv.pixnet.net/blog/post/227833712","flymyangel0606.pixnet.net/blog/post/120212757","mitchell0327.pixnet.net/blog/post/224456097","q82465.pixnet.net/blog/post/224466609","wowginer.pixnet.net/blog/post/469426511","q82465.pixnet.net/blog/post/224413044","maxine1103.pixnet.net/blog/post/47213235","cjchun.pixnet.net/blog/post/327791820","nicolecocolee.pixnet.net/blog/post/68682734","srj5557.pixnet.net/blog/post/228931400","yowtzy.pixnet.net/blog/post/351670150","hueiwen.pixnet.net/blog/post/102670246","ilovecurry.pixnet.net/blog/post/321584930","chengmilk.pixnet.net/blog/post/351837313","bornwin.pixnet.net/blog/post/404528839","mc0718.pixnet.net/blog/post/3511259","milkgirl2012.pixnet.net/blog/post/469486478","catmiyuki.pixnet.net/blog/post/5795971","wilson7517.pixnet.net/blog/post/446019080","leelee77.pixnet.net/blog/post/68779820","lovechina.pixnet.net/blog/post/351655894","s228587sarah.pixnet.net/blog/post/351658144","grass0217.pixnet.net/blog/post/327891369","sharonmammy.pixnet.net/blog/post/68672000","ad108.pixnet.net/blog/post/224455233","molimammy.pixnet.net/blog/post/351813424","newsugar77.pixnet.net/blog/post/210498775","wakeupbagirls.pixnet.net/blog/post/357858929","susan2582.pixnet.net/blog/post/467709803","ad108.pixnet.net/blog/post/224412168","ad108.pixnet.net/blog/post/223414692","loverinoa.pixnet.net/blog/post/469502744","bbmler0815.pixnet.net/blog/post/105964477","yataome2013.pixnet.net/blog/post/351801772","daystar99.pixnet.net/blog/post/469322903","yuan2734.pixnet.net/blog/post/228093497","sunny9987.pixnet.net/blog/post/372035468","maggie7968.pixnet.net/blog/post/68459288","anshunkid1.pixnet.net/blog/post/25781168","oscarhsu0520.pixnet.net/blog/post/244359340","bonnie920.pixnet.net/blog/post/4178066","ad108.pixnet.net/blog/post/224362512","xfg123.pixnet.net/blog/post/404536246","m22023527.pixnet.net/blog/post/463361501","sonoamy.pixnet.net/blog/post/29758862","m22023527.pixnet.net/blog/post/469291259","a07160716.pixnet.net/blog/post/368211737","alice3576000.pixnet.net/blog/post/117972","alice3576000.pixnet.net/blog/post/89114130","ljchildcare2017.pixnet.net/blog/post/145587486","bootscat.pixnet.net/blog/post/445314779","ljchildcare2017.pixnet.net/blog/post/271763672","nelischool222.pixnet.net/blog/post/202440689","coco93.pixnet.net/blog/post/34979734","w20770.pixnet.net/blog/post/36505866","a0411214.pixnet.net/blog/post/350814376","dp26714986.pixnet.net/blog/post/467897486","wilson7517.pixnet.net/blog/post/446666249","mommyselect.pixnet.net/blog/post/351840799","uginc.pixnet.net/blog/post/19249243","kelly890124.pixnet.net/blog/post/322472853","emom0719.pixnet.net/blog/post/351854761","klps2013.pixnet.net/blog/post/348009088","hsuihui.pixnet.net/blog/post/24220990","meta9319.pixnet.net/blog/post/11929822","highart929613.pixnet.net/blog/post/351817999","ccornell999tw.pixnet.net/blog/post/332090721","babydreamfarm.pixnet.net/blog/post/302612351","yoyoschool.pixnet.net/blog/post/223713090","cseskids.pixnet.net/blog/post/269934236","m22023527.pixnet.net/blog/post/466806347","kukjyu.pixnet.net/blog/post/129138974","hsuanshian.pixnet.net/blog/post/445586168","wilson7517.pixnet.net/blog/post/446594975","englishfuntw.pixnet.net/blog/post/3088574","cosmospeople.pixnet.net/blog/post/4294976","grand520.pixnet.net/blog/post/89513885","ginmammy.pixnet.net/blog/post/190129522","wseskinder106.pixnet.net/blog/post/283610496","dp26714986.pixnet.net/blog/post/469446044","wanda0417.pixnet.net/blog/post/68687882","smileylionet.pixnet.net/blog/post/65935963","ccf56.pixnet.net/blog/post/200707836","cseskids.pixnet.net/blog/post/296829108","kangaroomamma.pixnet.net/blog/post/4791935","jabennejabenne1.pixnet.net/blog/post/216803064","lutong01.pixnet.net/blog/post/191069715","wuk7317025.pixnet.net/blog/post/322405599","m0927895109.pixnet.net/blog/post/43386313","xfg123.pixnet.net/blog/post/404053058","meta6726726.pixnet.net/blog/post/18569284","win01786.pixnet.net/blog/post/338207084","wuzyho.pixnet.net/blog/post/469478582","ionlife.pixnet.net/blog/post/75734721","yuanx2liang.pixnet.net/blog/post/469348295","miffychung24.pixnet.net/blog/post/200463150","sunnygo1798.pixnet.net/blog/post/400626098","red35.pixnet.net/blog/post/44739309","laliana.pixnet.net/blog/post/44726949","hakunafamily.pixnet.net/blog/post/218143113","easonjen.pixnet.net/blog/post/228993011","lydia2312005.pixnet.net/blog/post/224437413","aronrandom.pixnet.net/blog/post/33099158","peaceo2.pixnet.net/blog/post/124258927","heaven2013.pixnet.net/blog/post/351844360","youwin721.pixnet.net/blog/post/68738378","sweetseaway.pixnet.net/blog/post/228911168","tophairdesign.pixnet.net/blog/post/224540568","thebasic.pixnet.net/blog/post/358806236","woosa17.pixnet.net/blog/post/351835666","morefun0102.pixnet.net/blog/post/406402306","cosmetic8800.pixnet.net/blog/post/228991781","oaksalon.pixnet.net/blog/post/351670225","lovecala.pixnet.net/blog/post/227359079","forget0430.pixnet.net/blog/post/4059689","forget0430.pixnet.net/blog/post/3372152","forget0430.pixnet.net/blog/post/3111962","jdsljciver.pixnet.net/blog/post/184650134","dear5288.pixnet.net/blog/post/228958865","kristin0126.pixnet.net/blog/post/224605142","grand520.pixnet.net/blog/post/88561943","sayi1231.pixnet.net/blog/post/385396118","r038828.pixnet.net/blog/post/192393459","s9977543.pixnet.net/blog/post/229027853","kdljs748m7.pixnet.net/blog/post/200402620","augustyo888.pixnet.net/blog/post/321745340","yuanx2liang.pixnet.net/blog/post/469348295","mikaho0330.pixnet.net/blog/post/353187353","xeriob098113.pixnet.net/blog/post/170271672","kii.pixnet.net/blog/post/47226987","vivianlove1111.pixnet.net/blog/post/403725104","john547.pixnet.net/blog/post/116935382","miffychung24.pixnet.net/blog/post/200463150","dorisbe1213.pixnet.net/blog/post/356473073","ksk.tw/blog/post/329878497","watergold.pixnet.net/blog/post/351696190","g02231006.pixnet.net/blog/post/307449330","yasumi0531.pixnet.net/blog/post/228924122","f890631.pixnet.net/blog/post/194462654","sinyimisslin.pixnet.net/blog/post/344389588","vigorbunny.pixnet.net/blog/post/454896005","gotwtop1.pixnet.net/blog/post/346050287","fdsarqqq.pixnet.net/blog/post/469355912","vigorbunny.pixnet.net/blog/post/454943609","travelerliv.com/blog/post/222723240","alexj.pixnet.net/blog/post/330817709","sean2665.pixnet.net/blog/post/117609238","vigorbunny.pixnet.net/blog/post/459975219","ciaoyuri.pixnet.net/blog/post/379345127","hannannie.pixnet.net/blog/post/462556760","diamondwoman.pixnet.net/blog/post/349319200","katherine01.pixnet.net/blog/post/140531158","fdsarqqq.pixnet.net/blog/post/434616287","jason123455.pixnet.net/blog/post/227267195","pipihihi.pixnet.net/blog/post/280763356","jay7134.pixnet.net/blog/post/195733173","misslucky2.pixnet.net/blog/post/358880842","asemia623.pixnet.net/blog/post/44404888","carywtkr.pixnet.net/blog/post/104232512","simo90686.pixnet.net/blog/post/332242881","vanbcca100.pixnet.net/blog/post/52608705","typhoon365.pixnet.net/blog/post/296956432","japanlive.pixnet.net/blog/post/2574571","cuteiscocoa.pixnet.net/blog/post/358875872","felicia8188999.pixnet.net/blog/post/227418605","nicowu.pixnet.net/blog/post/65709442","mon0926.pixnet.net/blog/post/344005294","snowqueen03.pixnet.net/blog/post/248066859","vvvenuskuo.pixnet.net/blog/post/4997777","lin06260818.pixnet.net/blog/post/43450168","bear8japan.pixnet.net/blog/post/27541735","ann005233.pixnet.net/blog/post/224517117","fighting0916.pixnet.net/blog/post/157819412","miumiuki.pixnet.net/blog/post/77982032","kalin0915.pixnet.net/blog/post/5794801","linsj0525.pixnet.net/blog/post/118672752","sayi1231.pixnet.net/blog/post/385396118","miawen1314.pixnet.net/blog/post/467565761","momodiy0515.pixnet.net/blog/post/228875894"],Bn=function(){function t(){Z(this,t),this.gaId="UA-126760750-6",this.ruleType="visa",this.matchCates="",this.isActive=!1,this.initial()}return tt(t,[{key:"initial",value:function(){this.isActive=this.shouldActive(),this.tasks=Tn[this.matchCates]}},{key:"shouldActive",value:function(){var t=document.querySelector(".header-title"),e=document.querySelector("body").dataset.articleSiteCategoryId,n=(new URLSearchParams(location.search).get("demo_ad_no"),An.indexOf("".concat(location.hostname).concat(location.pathname).split("-")[0].replace(window.pix.domain_append,""))>-1);if(!t||n)return!1;for(var i=t.innerText.toLowerCase(),o=K(Mn),a=!1,r=0;r<o.length;r++){var s=Mn[o[r]];if(a)break;for(var p=0;p<s.length;p++){for(var c=s[p].toLowerCase().split("*"),l=0,h=0;h<c.length;h++)i.match(c[h])&&l++;if(l===c.length){this.matchCates=o[r],a=!0;break}}}return a||-1===["6","22","23"].indexOf(e)||(this.matchCates="EC",a=!0),a}},{key:"getEventLabel",value:function(){return"visa-".concat(this.matchCates)}}]),t}(),Nn=function(){function t(){Z(this,t),this.hasSetMessengerData=!1,this.rules=null,this.isActive=!1,this.initial()}return tt(t,[{key:"initial",value:function(){var t=new Bn;t.isActive&&(this.rules=t),this.isActive=!!this.rules,pix.mobileNoAd&&(this.isActive=!1),this.isActive&&(this.initGA(this.rules.gaId),this.sendImpression())}},{key:"sendImpression",value:function(){this.sendAnalytic({category:"pilot_w_dialog",action:"imp_of_pilot_visa"})}},{key:"setTaskData",value:function(t,e){this.weather=t,this.memberInfo=e}},{key:"setLaunchBarData",value:function(t){this.launchBar=t}},{key:"showHappixMessenger",value:function(){this.launchBar.showHappixMessenger()}},{key:"showSpecialMessenger",value:function(){var t=this;this.hasSetMessengerData||(this.specialMessengerElement=$e.getElementByPostfix("launcher-bar__special-messenger"),this.specialMessenger=new Pn(this.specialMessengerElement,{dangling:!0}).render(),this.specialMessenger.setData({weather:this.weather,memberInfo:this.memberInfo,task:this.rules.tasks}),this.hasSetMessengerData=!0),requestAnimationFrame((function(){requestAnimationFrame((function(){t.specialMessenger.show()}))}))}},{key:"getContentMessage",value:function(){return this.rules.tasks.contentMessage}},{key:"bindSpecialNotificationEvent",value:function(){var t=this;this.specialNotificationCloseBtn=$e.getElementByPostfix("special-notification__close-button"),this.specialNotificationCloseBtn.bindEvent("click",(function(){t.hideSpecialNotification()}))}},{key:"showSpecialNotification",value:function(){var t=this;this.specialNotificationElement=$e.getElementByPostfix("launcher-bar__special-notification"),this.specialNotification=new yn(this.specialNotificationElement).render(),requestAnimationFrame((function(){requestAnimationFrame((function(){t.specialNotification.show(),t.bindSpecialNotificationEvent()}))}))}},{key:"hideSpecialNotification",value:function(){this.specialNotification.hide()}},{key:"showSpecialNotificationFlow",value:function(t,e){var n=this;if(this.isActive)if(t){this.showSpecialNotification();var i=setInterval((function(){(function(){var t=document.documentElement;return(document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset)+t.clientHeight-1e3>=1500})()&&(clearInterval(i),e(0),n.hideSpecialNotification())}),500)}else this.showSpecialNotification();this.isActive||t&&e()}},{key:"initGA",value:function(t){ga("create",t,"auto","pixnetSpecialPilot")}},{key:"sendAnalytic",value:function(t){if(!this.isActive)return!1;var e=t.category,n=t.action,i=t.label,o=t.value;i=this.rules.getEventLabel(),"undefined"!=typeof ga&&ga("pixnetSpecialPilot.send","event",e,n,i,o),"undefined"!=typeof _piq&&_piq.push(["trackEvent",e,n,i,o])}}]),t}();window.pixShowSpecialElementsRules=new Nn;var On=window.pixShowSpecialElementsRules;xn('.pixnet-happix-pilot__happix-card{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.pixnet-happix-pilot__happix-card__avatar{width:36px}.pixnet-happix-pilot__happix-card__conversation{width:10px}.pixnet-happix-pilot__happix-card__content{-webkit-box-flex:1;-ms-flex:1;flex:1;padding:15px;padding-bottom:0;color:#000;background:#f6f6f6;border-radius:20px;border-top-left-radius:0}.pixnet-happix-pilot__happix-card__content__message{padding-bottom:15px}.pixnet-happix-pilot__happix-card__content__link,.pixnet-happix-pilot__happix-card__content__message{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px}.pixnet-happix-pilot__happix-card__content__link{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:10px 0;border-top:1px solid #e9e9e9;color:#4a90e2;text-align:center;text-decoration:none;cursor:pointer}.pixnet-happix-pilot__happix-card__content__link:hover{color:#4a90e2}.pixnet-happix-pilot__happix-card__content__link.hidden{display:none}.pixnet-happix-pilot__happix-card__content__link:after{display:block;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg);content:"";height:16px;width:16px;margin-left:3px}');var jn=function(t){function e(t,n){return Z(this,e),Ce(this,Ae(e).call(this,t,n))}return je(e,Ve),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=this.props.name?"".concat(this.props.name,"～我是你的領航員Happix，很高興看到你！"):"我是領航員Happix，很高興看到你！600萬人正在挑戰任務拿好康，快跟上！",n=this.props.name?"hidden":"",i=this.props.type;return"special"===i&&(n="hidden",e=On.getContentMessage(),e=this.props.name?"".concat(this.props.name,"，").concat(e):e),'\n            <div class="'.concat(t,'__happix-card">\n                <img\n                    class="').concat(t,'__happix-card__avatar"\n                    src="').concat(Fe,"/").concat("special"===i?{visa:"visa.png"}[On.rules.ruleType]:"happix_head.svg",'"\n                />\n                <img\n                    class="').concat(t,'__happix-card__conversation"\n                    src="').concat(Fe,'/conversation_gray.svg"\n                />\n                <div class="').concat(t,'__happix-card__content">\n                    <div class="').concat(t,'__happix-card__content__message">').concat(e,'</div>\n                    <a\n                        class="').concat(t,"__happix-card__content__link ").concat(n,'"\n                        href="').concat(on.getOptions().getLoginURL(),'"\n                    >\n                        立即登入\n                    </a>\n                </div>\n            </img>\n        ')}},{key:"getElements",value:function(){this.happixCardElement=$e.getElementByPostfix("happix-card"),this.contentLinkElement=this.happixCardElement.getElementByPostfix("happix-card__content__link")}},{key:"bindEvents",value:function(){var t=this;this.contentLinkElement.bindEvent("click",(function(){ln({category:"pilot-happixPopup",action:"login"}),ln({category:"pilot-happixPopup",action:"positionClick",label:t.props.msg_pos})}))}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this}}]),e}(),Ln={now:function(){return Date.now()},withinSpecificHours:function(t,e,n){return!(!t||!e)&&Math.ceil(Math.abs(t-e))<36e5*n},toCountDownTime:function(t){var e=Number(t)-this.now()/1e3,n=e>0?"剩下":"過期",i=Math.floor(e/60),o=Math.floor(i/1440),a=Math.floor((i-1440*o)/60);return n+o+"日"+a+"小時"+(i-1440*o-60*a)+"分"}};xn('@media screen and (max-width:768px){.pixnet-happix-pilot__task-card__wrapper{display:block;overflow:hidden;text-decoration:none;background-color:#f6f6f6;border-radius:20px}.pixnet-happix-pilot__task-card__wrapper:hover{text-decoration:none}.pixnet-happix-pilot__task-card__content-container{padding:15px;padding-bottom:0}.pixnet-happix-pilot__task-card__highlight{background-color:#fff4cd}.pixnet-happix-pilot__task-card__cover{display:block;width:100%}.pixnet-happix-pilot__task-card__cover-container{position:relative}.pixnet-happix-pilot__task-card__countdown{position:absolute;bottom:0;width:100%;padding:2px 15px;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:rgba(0,0,0,.5)}.pixnet-happix-pilot__task-card__countdown:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_time.svg);display:inline-block;width:14px;height:14px;margin-right:5px;vertical-align:middle;-o-object-fit:contain;object-fit:contain;-webkit-transform:translateY(-10%);transform:translateY(-10%)}.pixnet-happix-pilot__task-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:22px;padding:0 5px;vertical-align:middle;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;-webkit-transform:translateY(-2px);transform:translateY(-2px);background-color:#66b3d9;border-radius:6px}.pixnet-happix-pilot__task-card__tag:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_task.svg);display:inline-block;width:18px;height:18px}.pixnet-happix-pilot__task-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;text-align:justify;color:#000}.pixnet-happix-pilot__task-card__description{overflow:hidden;max-height:61px;height:auto;margin-top:12px;margin-bottom:15px;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;-moz-text-overflow:ellipsis;word-wrap:break-word}.pixnet-happix-pilot__task-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__task-card__btn-link span{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;line-height:40px}.pixnet-happix-pilot__task-card__btn-link span:after{content:"";display:block;height:16px;width:16px;margin-left:3px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg)}}@media screen and (min-width:769px){.pixnet-happix-pilot__task-card__wrapper{display:block;overflow:hidden;text-decoration:none;background-color:#f6f6f6;border-radius:20px}.pixnet-happix-pilot__task-card__wrapper:hover{text-decoration:none}.pixnet-happix-pilot__task-card__content-container{padding:15px;padding-bottom:0}.pixnet-happix-pilot__task-card__highlight{background-color:#fff4cd}.pixnet-happix-pilot__task-card__cover{display:block;width:100%}.pixnet-happix-pilot__task-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:22px;padding:0 5px;vertical-align:middle;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:#66b3d9;border-radius:6px;-webkit-transform:translateY(-2px);transform:translateY(-2px)}.pixnet-happix-pilot__task-card__tag:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_task.svg);display:inline-block;width:18px;height:18px}.pixnet-happix-pilot__task-card__cover-container{position:relative}.pixnet-happix-pilot__task-card__countdown{position:absolute;width:100%;padding:2px 15px;bottom:0;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:rgba(0,0,0,.5)}.pixnet-happix-pilot__task-card__countdown:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_time.svg);display:inline-block;width:14px;height:14px;margin-right:5px;vertical-align:middle;-o-object-fit:contain;object-fit:contain;-webkit-transform:translateY(-10%);transform:translateY(-10%)}.pixnet-happix-pilot__task-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;color:#000;text-align:justify}.pixnet-happix-pilot__task-card__description{overflow:hidden;height:auto;max-height:61px;margin-top:12px;margin-bottom:15px;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;-moz-text-overflow:ellipsis;word-wrap:break-word}.pixnet-happix-pilot__task-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__task-card__btn-link span{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;line-height:40px}.pixnet-happix-pilot__task-card__btn-link span:after{content:"";display:block;height:16px;width:16px;margin-left:3px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg)}}');var In=function(t){function e(t,n){return Z(this,e),Ce(this,Ae(e).call(this,t,n))}return je(e,Ve),tt(e,[{key:"_getImageHtml",value:function(){var t=this.getCssPrefix(),e=En();return this.props.cover?'\n            <img class="'.concat(t,'__task-card__cover"\n                src="').concat(e?this.props.cover:un(this.props.cover,254,127),'"\n            >\n        '):""}},{key:"_getCountDownHtml",value:function(){if(!this.props.cover)return"";var t=this.getCssPrefix();return'<div class="'.concat(t,'__task-card__countdown">\n                    ').concat(Ln.toCountDownTime(this.props.end_time),"\n                </div>")}},{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=2===this.props.msg_pos?"".concat(t,"__task-card__highlight"):"";return'\n            <a class="'.concat(t,"__task-card__wrapper ").concat(t,"__task-card__").concat(this.props.id,'"\n                href="').concat(this.props.link,'" target="_blank">\n                <div class="').concat(t,'__task-card__cover-container">\n                    ').concat(this._getImageHtml(),"\n                    ").concat(this._getCountDownHtml(),'\n                </div>\n                <div class="').concat(t,"__task-card__content-container ").concat(e,'">\n                    <div>\n                        <span class="').concat(t,'__task-card__tag">').concat(this.props.tag,'</span>\n                        <span class="').concat(t,'__task-card__title">').concat(this.props.title,'</span>\n                    </div>\n                    <div class="').concat(t,'__task-card__description">').concat(this.props.description,'</div>\n                    <div class="').concat(t,'__task-card__btn-link">\n                        <span>參加任務</span>\n                    </div>\n                </div>\n            </a>\n        ')}},{key:"bindEvents",value:function(){var t=this;this.taskCardElement.bindEvent("click",vn.debounce((function(){ln({category:"pilot-happixPopup",action:"positionClick",label:String(t.props.msg_pos),id:t.props.id})}),100))}},{key:"getElements",value:function(){this.taskCardElement=$e.getElementByPostfix("task-card__".concat(this.props.id))}},{key:"render",value:function(){return this.containerElement.appendChild($e.createElement(this.getTemplate())),this.getElements(),this.bindEvents(),this}}]),e}();xn('@media screen and (max-width:768px){.pixnet-happix-pilot__happix-messenger{position:fixed;top:0;right:0;bottom:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);z-index:2;will-change:opacity}.pixnet-happix-pilot__happix-messenger.hidden{opacity:0;pointer-events:none}.pixnet-happix-pilot__happix-messenger__wrapper{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;-webkit-transition:-webkit-transform .4s;transition:-webkit-transform .4s;transition:transform .4s;transition:transform .4s,-webkit-transform .4s;will-change:transform}.pixnet-happix-pilot__happix-messenger__wrapper.hidden{-webkit-transform:translateY(100%);transform:translateY(100%)}.pixnet-happix-pilot__happix-messenger__wrapper .pixnet-happix-pilot__special-messenger__avatar{position:absolute;top:47px;right:83px;width:70px;z-index:1;cursor:pointer}.pixnet-happix-pilot__happix-messenger__wrapper .pixnet-happix-pilot__special-messenger__avatar.hidden{display:none}.pixnet-happix-pilot__happix-messenger__avatar{position:absolute;top:47px;right:15px;z-index:2;cursor:pointer}.pixnet-happix-pilot__happix-messenger__content{position:absolute;top:110px;right:0;bottom:0;left:0;width:100%;height:calc(100% - 110px);padding:15px 0;background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;overflow-y:auto;-webkit-overflow-scrolling:touch;z-index:1}.pixnet-happix-pilot__happix-messenger__content>*{margin-right:20px;margin-left:15px}.pixnet-happix-pilot__happix-messenger__content__date-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;margin-right:0;margin-left:0;color:#81828e;font-family:PingFang TC;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.8px}.pixnet-happix-pilot__happix-messenger__content__date-container:before{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-right:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__date-container:after{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__happix-container{margin-top:20px}.pixnet-happix-pilot__happix-messenger__content__card-container>*,.pixnet-happix-pilot__happix-messenger__content__coupon-container>*,.pixnet-happix-pilot__happix-messenger__content__task-container>*{margin-top:15px;margin-left:46px}.pixnet-happix-pilot__happix-messenger__content__card-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__coupon-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__task-container>:first-child{margin-top:35px;margin-left:0}.pixnet-happix-pilot__happix-messenger__fixed{position:fixed}.pixnet-happix-pilot__happix-messenger__close_button{position:absolute;top:0;left:0;display:inline-block;width:24px;height:24px;margin:0;padding:10px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_close.svg) 50% no-repeat;cursor:pointer}}@media screen and (min-width:769px){.pixnet-happix-pilot__happix-messenger{position:fixed;top:180px;right:0;bottom:0;left:0;width:100%;height:calc(100% - 180px);margin:auto;-webkit-transition:all .4s;transition:all .4s}.pixnet-happix-pilot__happix-messenger:focus{outline:none}.pixnet-happix-pilot__happix-messenger.hidden{opacity:0;-webkit-transform:translateY(100%);transform:translateY(100%);pointer-events:none}.pixnet-happix-pilot__happix-messenger.dangling{bottom:46px;height:calc(100% - 226px)}.pixnet-happix-pilot__happix-messenger__wrapper{position:absolute;top:0;right:0;bottom:0;width:335px;height:100%}.pixnet-happix-pilot__happix-messenger__wrapper .pixnet-happix-pilot__special-messenger__avatar.hidden{display:none}.pixnet-happix-pilot__happix-messenger__avatar{position:absolute;top:0;right:0;z-index:2;cursor:pointer;pointer-events:auto}.pixnet-happix-pilot__happix-messenger__content{position:absolute;top:74px;right:0;bottom:0;left:0;width:100%;padding:15px 0;background:#fff;border-top-right-radius:6px;border-top-left-radius:6px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 4px 0 rgba(0,0,0,.4);box-shadow:0 0 4px 0 rgba(0,0,0,.4);overflow-y:auto;-webkit-overflow-scrolling:touch;z-index:1;pointer-events:auto}.pixnet-happix-pilot__happix-messenger__content>*{margin-right:20px;margin-left:15px}.pixnet-happix-pilot__happix-messenger__content__date-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;margin-right:0;margin-left:0;color:#81828e;font-family:PingFang TC;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.8px}.pixnet-happix-pilot__happix-messenger__content__date-container:before{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-right:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__date-container:after{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__happix-container{margin-top:20px}.pixnet-happix-pilot__happix-messenger__content__card-container>*,.pixnet-happix-pilot__happix-messenger__content__coupon-container>*,.pixnet-happix-pilot__happix-messenger__content__task-container>*{margin-top:15px;margin-left:46px}.pixnet-happix-pilot__happix-messenger__content__card-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__coupon-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__task-container>:first-child{margin-top:35px;margin-left:0}.pixnet-happix-pilot__happix-messenger-mask{opacity:0;will-change:opacity}.pixnet-happix-pilot__happix-messenger-mask.show{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);opacity:1}}');var Hn,zn,Fn,Rn=function(){return{scrollDepth:{s25:!1,s50:!1,s75:!1,s100:!1},cardTotal:0,positionMax:0}},Dn=function(t){function e(t,n){var i;return Z(this,e),(i=Ce(this,Ae(e).call(this,t,n))).saveWindowScroll(),i.track=Rn(),i.closeHappixMessager=i.closeHappixMessager.bind(Ee(Ee(i))),i.openSpecialMessager=i.openSpecialMessager.bind(Ee(Ee(i))),i}return je(e,Ve),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=this.props&&this.props.dangling,n=(new Date).toLocaleDateString("zh-TW",{month:"long",day:"numeric",weekday:"short"});return'\n            <div class="'.concat(t,'__happix-messenger-mask"></div>\n            <div\n                class="').concat(t,"__happix-messenger hidden ").concat(e?"dangling":"",'"\n                style="max-width: ').concat(on.getOptions().getPilotWidth(),'px;"\n            >\n                <div class="').concat(t,'__happix-messenger__wrapper hidden">\n                    ').concat(On.isActive?'<img\n                class="'.concat(t,'__special-messenger__avatar"\n                src="').concat(Fe,"/").concat({visa:"visa_chat.png"}[On.rules.ruleType],'"\n            />'):"",'\n                    <img\n                        class="').concat(t,'__happix-messenger__avatar"\n                        src="').concat(Fe,'/btn_happix_ufo_open.png"\n                        srcset="').concat(Fe,"/btn_happix_ufo_open@2x.png 2x,\n                                    ").concat(Fe,'/btn_happix_ufo_open@3x.png 3x"\n                    />\n                    <div class="').concat(t,'__happix-messenger__content">\n                        ').concat(En()?'<span class="'.concat(t,'__happix-messenger__close_button"></span>'):"",'\n                        <div class="').concat(t,'__happix-messenger__content__weather-container"></div>\n                        <div class="').concat(t,'__happix-messenger__content__date-container">\n                            ').concat(n,'\n                        </div>\n                        <div class="').concat(t,'__happix-messenger__content__happix-container"></div>\n                        <div class="').concat(t,'__happix-messenger__content__coupon-container"></div>\n                        <div class="').concat(t,'__happix-messenger__content__task-container"></div>\n                    </div>\n                </div>\n            </div>\n        ')}},{key:"getElements",value:function(){this.bodyElement=$e.getElementBySelector("body"),this.happixMaskElement=$e.getElementByPostfix("happix-messenger-mask"),this.happixMessengerElement=$e.getElementByPostfix("happix-messenger"),this.happixWrapperElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__wrapper"),this.happixAvatarElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__avatar"),this.specialAvatarElement=this.happixMessengerElement.getElementByPostfix("special-messenger__avatar"),this.happixContentElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content"),this.weatherContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__weather-container"),this.happixContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__happix-container"),this.couponContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__coupon-container"),this.taskContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__task-container"),this.happixCloseButtonElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__close_button")}},{key:"markS25",value:function(){this.track.scrollDepth.s25=!0}},{key:"markS50",value:function(){this.track.scrollDepth.s50=!0}},{key:"markS75",value:function(){this.track.scrollDepth.s75=!0}},{key:"markS100",value:function(){this.track.scrollDepth.s100=!0}},{key:"bindEvents",value:function(){var t=this;this.happixMaskElement.bindEvent("click",this.closeHappixMessager),this.happixMessengerElement.bindEvent("click",this.closeHappixMessager),this.happixAvatarElement.bindEvent("click",this.closeHappixMessager),On.isActive&&this.specialAvatarElement.bindEvent("click",this.openSpecialMessager),En()&&this.happixCloseButtonElement.bindEvent("click",this.closeHappixMessager),this.happixContentElement.bindEvent("click",(function(t){t.stopPropagation()})),this.happixContentElement.bindEvent("scroll",vn.debounce((function(e){t.isMessengerVisible()&&(t.trackScrollDepth(e.target),t.trackPositionExposure())}),200));var e=this.happixContentElement.getElement();this.happixContentElement.bindEvent("touchmove",vn.debounce((function(t){var n=e.scrollTop,i=e.scrollHeight,o=n+e.offsetHeight;n<=0&&o>=i?t.preventDefault():n<=0?e.scrollTop=1:o===i&&(e.scrollTop=n-1)}),100,!0))}},{key:"openSpecialMessager",value:function(t){t.stopPropagation(),this.hide(),On.showSpecialMessenger(),On.sendAnalytic({category:"pilot_w_happix_missions",action:"click_on_special_tab"})}},{key:"closeHappixMessager",value:function(t){t.stopPropagation(),this.containerElement.fireEvent("close"),ln({category:"pilot-happixPopup",action:"closePopup"}),On.sendAnalytic({category:"pilot_w_happix_missions",action:"close_happix_missions"})}},{key:"trackScrollDepth",value:function(t){var e=t.scrollTopMax,n=t.scrollTop,i=this.track.scrollDepth,o=i.s25,a=i.s50,r=i.s75,s=i.s100;!o&&n>.25*e&&(ln({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-25"}),this.markS25()),!a&&n>.5*e&&(ln({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-50"}),this.markS50()),!r&&n>.75*e&&(ln({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-75"}),this.markS75()),s||n!==e||(ln({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-100"}),this.markS100())}},{key:"trackPositionExposure",value:function(){var t=this,e=this.happixCard,n=this.couponCards,i=this.taskCards,o=[];if(e){if(o.push({element:e.happixCardElement.getElement(),pos:e.msg_pos}),n){var a=n.map((function(t){return{element:t.couponCardElement.getElement(),pos:t.props.msg_pos}}));o=o.concat(a)}if(i){var r=i.map((function(t){var e=t.taskCardElement.getElement(),n=t.props;return{element:e,pos:n.msg_pos,id:n.id}}));o=o.concat(r)}var s=o.filter(this.isTopLessThanWindowBottom);s.length>this.track.positionMax&&s.forEach((function(e){e.pos>t.track.positionMax&&(ln({category:"pilot-happixPopup",action:"positionImpression",label:e.pos,id:e.id}),t.track.positionMax=e.pos)}))}}},{key:"isTopLessThanWindowBottom",value:function(t){return t.element.getBoundingClientRect().top<window.innerHeight}},{key:"resetTrackRecord",value:function(){this.track=Rn()}},{key:"setData",value:function(t){var e=this,n=t.weather,i=t.memberInfo,o=void 0===i?{}:i,a=t.coupon,r=t.task,s=0;this.weatherCard=this.createWeatherCard({type:n}),this.happixCard=this.createHappixCard({name:o.display_name,msg_pos:1}),s++,a&&(this.couponMessageCard=this.createCouponMessageCard({message:a.intro}),this.couponCards=a.items.map((function(t){return e.createCouponCard(bn({},t,{msg_pos:++s}))}))),r&&(this.taskMessageCard=this.createTaskMessageCard({message:r.intro}),this.taskCards=r.items.map((function(t){return e.createTaskCard(bn({},t,{msg_pos:++s}))}))),this.track.cardTotal=s}},{key:"createWeatherCard",value:function(t){return new Sn(this.weatherContainerElement,t).render()}},{key:"createHappixCard",value:function(t){return new jn(this.happixContainerElement,t).render()}},{key:"createCouponMessageCard",value:function(t){return new wn(this.couponContainerElement,t).render()}},{key:"createCouponCard",value:function(t){return new kn(this.couponContainerElement,t).render()}},{key:"createTaskMessageCard",value:function(t){return new wn(this.taskContainerElement,t).render()}},{key:"createTaskCard",value:function(t){return new In(this.taskContainerElement,t).render()}},{key:"saveWindowScroll",value:function(){this.scroll={x:window.scrollX,y:window.scrollY}}},{key:"isMessengerVisible",value:function(){return!this.happixMessengerElement.hasClass("hidden")}},{key:"hide",value:function(){if(this.isMessengerVisible()){this.trackPositionExposure(),this.resetTrackRecord();var t=this.getCssPrefix();this.happixMessengerElement.addClass("hidden"),this.happixWrapperElement.addClass("hidden"),this.happixMaskElement.removeClass("show"),En()&&(this.bodyElement.removeClass("".concat(t,"__happix-messenger__fixed")).setStyle("overflow",null),window.scroll(this.scroll.x,this.scroll.y))}return this}},{key:"show",value:function(){if(!this.isMessengerVisible()){var t=this.getCssPrefix();this.happixMessengerElement.setStyle("transition","all .4s").removeClass("hidden"),this.happixWrapperElement.removeClass("hidden"),this.happixMaskElement.setStyle("transition","opacity .4s").addClass("show"),this.happixContentElement.scrollToTop(),En()&&(this.saveWindowScroll(),this.bodyElement.addClass("".concat(t,"__happix-messenger__fixed")).setStyle("overflow","hidden")),this.happixMessengerElement.getElement().focus()}return this}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this}}]),e}(),Yn=m.JSON||(m.JSON={stringify:JSON.stringify}),Wn=function(t){return Yn.stringify.apply(Yn,arguments)},Gn=lt("toStringTag"),Un="Arguments"==a(function(){return arguments}()),qn=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Gn))?n:Un?a(e):"Object"==(i=a(e))&&"function"==typeof e.callee?"Arguments":i},Vn=function(t,e,n,i){try{return i?e(j(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&j(o.call(t)),e}},$n=lt("iterator"),Kn=Array.prototype,Zn=lt("iterator"),Jn=m.getIteratorMethod=function(t){if(null!=t)return t[Zn]||t["@@iterator"]||nt[qn(t)]},Xn=g((function(t){var e={},n={},i=t.exports=function(t,i,o,a,r){var s,p,c,l,h=r?function(){return t}:Jn(t),u=N(o,a,i?2:1),x=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(function(t){return void 0!==t&&(nt.Array===t||Kn[$n]===t)}(h)){for(s=f(t.length);s>x;x++)if((l=i?u(j(p=t[x])[0],p[1]):u(t[x]))===e||l===n)return l}else for(c=h.call(t);!(p=c.next()).done;)if((l=Vn(c,u,p.value,i))===e||l===n)return l};i.BREAK=e,i.RETURN=n})),Qn=lt("species"),ti=function(t,e){var n,i=j(t).constructor;return void 0===i||null==(n=j(i)[Qn])?e:B(n)},ei=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},ni=b.process,ii=b.setImmediate,oi=b.clearImmediate,ai=b.MessageChannel,ri=b.Dispatch,si=0,pi={},ci=function(){var t=+this;if(pi.hasOwnProperty(t)){var e=pi[t];delete pi[t],e()}},li=function(t){ci.call(t.data)};ii&&oi||(ii=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return pi[++si]=function(){ei("function"==typeof t?t:Function(t),e)},Hn(si),si},oi=function(t){delete pi[t]},"process"==a(ni)?Hn=function(t){ni.nextTick(N(ci,t,1))}:ri&&ri.now?Hn=function(t){ri.now(N(ci,t,1))}:ai?(Fn=(zn=new ai).port2,zn.port1.onmessage=li,Hn=N(Fn.postMessage,Fn,1)):b.addEventListener&&"function"==typeof postMessage&&!b.importScripts?(Hn=function(t){b.postMessage(t+"","*")},b.addEventListener("message",li,!1)):Hn="onreadystatechange"in F("script")?function(t){at.appendChild(F("script")).onreadystatechange=function(){at.removeChild(this),ci.call(t)}}:function(t){setTimeout(N(ci,t,1),0)});var hi={set:ii,clear:oi},fi=hi.set,ui=b.MutationObserver||b.WebKitMutationObserver,xi=b.process,di=b.Promise,gi="process"==a(xi);function _i(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i})),this.resolve=B(e),this.reject=B(n)}var mi={f:function(t){return new _i(t)}},bi=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},vi=b.navigator,ki=vi&&vi.userAgent||"",yi=function(t,e){if(j(t),O(e)&&e.constructor===t)return e;var n=mi.f(t);return(0,n.resolve)(e),n.promise},wi=lt("species"),Ei=lt("iterator"),Ci=!1;try{[7][Ei]().return=function(){Ci=!0}}catch(_){}var Si,Pi,Ti,Mi,Ai=hi.set,Bi=function(){var t,e,n,i=function(){var i,o;for(gi&&(i=xi.domain)&&i.exit();t;){o=t.fn,t=t.next;try{o()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(gi)n=function(){xi.nextTick(i)};else if(!ui||b.navigator&&b.navigator.standalone)if(di&&di.resolve){var o=di.resolve(void 0);n=function(){o.then(i)}}else n=function(){fi.call(b,i)};else{var a=!0,r=document.createTextNode("");new ui(i).observe(r,{characterData:!0}),n=function(){r.data=a=!a}}return function(i){var o={fn:i,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}(),Ni=b.TypeError,Oi=b.process,ji=Oi&&Oi.versions,Li=ji&&ji.v8||"",Ii=b.Promise,Hi="process"==qn(Oi),zi=function(){},Fi=Pi=mi.f,Ri=!!function(){try{var t=Ii.resolve(1),e=(t.constructor={})[lt("species")]=function(t){t(zi,zi)};return(Hi||"function"==typeof PromiseRejectionEvent)&&t.then(zi)instanceof e&&0!==Li.indexOf("6.6")&&-1===ki.indexOf("Chrome/66")}catch(t){}}(),Di=function(t){var e;return!(!O(t)||"function"!=typeof(e=t.then))&&e},Yi=function(t,e){if(!t._n){t._n=!0;var n=t._c;Bi((function(){for(var i=t._v,o=1==t._s,a=0,r=function(e){var n,a,r,s=o?e.ok:e.fail,p=e.resolve,c=e.reject,l=e.domain;try{s?(o||(2==t._h&&Ui(t),t._h=1),!0===s?n=i:(l&&l.enter(),n=s(i),l&&(l.exit(),r=!0)),n===e.promise?c(Ni("Promise-chain cycle")):(a=Di(n))?a.call(n,p,c):p(n)):c(i)}catch(t){l&&!r&&l.exit(),c(t)}};n.length>a;)r(n[a++]);t._c=[],t._n=!1,e&&!t._h&&Wi(t)}))}},Wi=function(t){Ai.call(b,(function(){var e,n,i,o=t._v,a=Gi(t);if(a&&(e=bi((function(){Hi?Oi.emit("unhandledRejection",o,t):(n=b.onunhandledrejection)?n({promise:t,reason:o}):(i=b.console)&&i.error&&i.error("Unhandled promise rejection",o)})),t._h=Hi||Gi(t)?2:1),t._a=void 0,a&&e.e)throw e.v}))},Gi=function(t){return 1!==t._h&&0===(t._a||t._c).length},Ui=function(t){Ai.call(b,(function(){var e;Hi?Oi.emit("rejectionHandled",t):(e=b.onrejectionhandled)&&e({promise:t,reason:t._v})}))},qi=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Yi(e,!0))},Vi=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw Ni("Promise can't be resolved itself");(e=Di(t))?Bi((function(){var i={_w:n,_d:!1};try{e.call(t,N(Vi,i,1),N(qi,i,1))}catch(t){qi.call(i,t)}})):(n._v=t,n._s=1,Yi(n,!1))}catch(t){qi.call({_w:n,_d:!1},t)}}};Ri||(Ii=function(t){(function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!")})(this,Ii,"Promise","_h"),B(t),Si.call(this);try{t(N(Vi,this,1),N(qi,this,1))}catch(t){qi.call(this,t)}},(Si=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:U(t,i,e[i]);return t}(Ii.prototype,{then:function(t,e){var n=Fi(ti(this,Ii));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Hi?Oi.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Yi(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Ti=function(){var t=new Si;this.promise=t,this.resolve=N(Vi,t,1),this.reject=N(qi,t,1)},mi.f=Fi=function(t){return t===Ii||t===Mi?new Ti(t):Pi(t)}),V(V.G+V.W+V.F*!Ri,{Promise:Ii}),ut(Ii,"Promise"),function(t){var e="function"==typeof m[t]?m[t]:b[t];I&&e&&!e[wi]&&W.f(e,wi,{configurable:!0,get:function(){return this}})}("Promise"),Mi=m.Promise,V(V.S+V.F*!Ri,"Promise",{reject:function(t){var e=Fi(this);return(0,e.reject)(t),e.promise}}),V(V.S+!0*V.F,"Promise",{resolve:function(t){return yi(this===Mi?Ii:this,t)}}),V(V.S+V.F*!(Ri&&function(t,e){if(!e&&!Ci)return!1;var n=!1;try{var i=[7],o=i[Ei]();o.next=function(){return{done:n=!0}},i[Ei]=function(){return o},t(i)}catch(t){}return n}((function(t){Ii.all(t).catch(zi)}))),"Promise",{all:function(t){var e=this,n=Fi(e),i=n.resolve,o=n.reject,a=bi((function(){var n=[],a=0,r=1;Xn(t,!1,(function(t){var s=a++,p=!1;n.push(void 0),r++,e.resolve(t).then((function(t){p||(p=!0,n[s]=t,--r||i(n))}),o)})),--r||i(n)}));return a.e&&o(a.v),n.promise},race:function(t){var e=this,n=Fi(e),i=n.reject,o=bi((function(){Xn(t,!1,(function(t){e.resolve(t).then(n.resolve,i)}))}));return o.e&&i(o.v),n.promise}}),V(V.P+V.R,"Promise",{finally:function(t){var e=ti(this,m.Promise||b.Promise),n="function"==typeof t;return this.then(n?function(n){return yi(e,t()).then((function(){return n}))}:t,n?function(n){return yi(e,t()).then((function(){throw n}))}:t)}}),V(V.S,"Promise",{try:function(t){var e=mi.f(this),n=bi(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var $i=m.Promise,Ki={sendHappixAPI:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(window.pix&&window.pix.member_token){var i={headers:{authorization:window.pix.member_token}};n=en({},n,i)}return this[t](e,n)},sendRecommendationsAPI:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(window.pix&&window.pix.member_token){var i={headers:{memberauth:window.pix.member_token}};n=en({},n,i)}return this[t](e,n)},getUrlRecommendations:function(t){return this.sendRecommendationsAPI("get","".concat(location.origin,"/api/blog/articlepushcounts?article_id=").concat(t))},postUrlRecommendations:function(t){return this.sendRecommendationsAPI("post","".concat(location.origin,"/api/blog/pusharticle"),t)},get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.ajax("GET",t,e)},post:function(t,e){return this.ajax("POST",t,e)},ajax:function(t,e,n){return new $i((function(i,o){var a=new XMLHttpRequest;a.open(t,e,!0),a.onload=function(){4===a.readyState&&200===a.status&&""!==a.response?i(JSON.parse(a.response)):o(a)},a.onerror=function(){o(a)},n&&n.headers&&K(n.headers).forEach((function(t){a.setRequestHeader(t,n.headers[t])})),n="object"===we(n)?Wn(n):n,a.send(n)}))}},Zi=function(t){return function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}(function(t){return t>9999?Math.floor(t/1e3)+"k":t}(t))},Ji=function(t){function e(t){var n;return Z(this,e),(n=Ce(this,Ae(e).call(this,t))).cssPrefix=n.getCssPrefix(),n}return je(e,Ve),tt(e,[{key:"getTemplates",value:function(){return'\n            <div class="'.concat(this.cssPrefix,'__comment-icon icon">\n                <img class="icon__img" src="https://s.pixfs.net/common/icons/btn_comment.svg" alt="留言" />\n                <img class="icon__img" src="https://s.pixfs.net/common/icons/btn_comment-hover.svg" alt="留言 hover" />\n            </div>\n            <span class="').concat(this.cssPrefix,'__comment-amount amount-word"></span>\n        ')}},{key:"getCommentAmount",value:function(){var t=document.querySelector(".".concat(this.cssPrefix,"__comment-amount"))||{},e=document.getElementsByTagName("body")[0].dataset.commentsCount||"";t.innerText=Zi(e)}},{key:"render",value:function(){document.querySelector("body").dataset.articleId,window.pix,"1"===document.getElementsByTagName("body")[0].dataset.commentClose||(this.containerElement.setHTML(this.getTemplates()),this.getCommentAmount())}}]),e}();function Xi(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!pix.member_token&&window.pixgame&&!window.pixgame.getState("sharedTopic")&&(window.pixgame.showPromptLoginPopup(t),window.pixgame.setState("sharedTopic",!0),window.pixgame.setStorge("pixSharedPost",1),t)||t&&(t.indexOf("facebook")>-1?window.open(t,"Facebook","height=550,width=550,resizable=1"):location.href=t)}xn("@media screen and (max-width:768px){.pixnet-happix-pilot__share-list__share-line{display:inline-block;width:32px;height:32px;background:url(https://streamtopic.pixnet.net/asset/images/icons/btn_line.svg) 0 no-repeat;cursor:pointer}}.pixnet-happix-pilot__share-list{position:absolute;bottom:45px;left:50%;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around;width:127px;height:42px;margin-top:4px;background-color:#fff;border-radius:30px;-webkit-box-shadow:0 0 15px 0 rgba(0,0,0,.1);box-shadow:0 0 15px 0 rgba(0,0,0,.1);overflow:hidden}.pixnet-happix-pilot__share-list>a{display:block;height:32px}.pixnet-happix-pilot__share-list__share-fb,.pixnet-happix-pilot__share-list__share-link{display:inline-block;width:32px;height:32px;background-repeat:no-repeat;background-position:0 0;cursor:pointer}.pixnet-happix-pilot__share-list__share-fb:hover,.pixnet-happix-pilot__share-list__share-link:hover{background-position:-42px 0}.pixnet-happix-pilot__share-list__share-fb{background-image:url(https://s.pixfs.net/common/icons/share_fb@1x.svg)}.pixnet-happix-pilot__share-list__share-link{background-image:url(https://s.pixfs.net/common/icons/share_link@1x.svg)}.pixnet-happix-pilot__share-list.pixnet-happix-pilot__share-list--desktop{top:0;left:60px;margin-top:0;width:auto;max-width:0;-webkit-transition:max-width .3s;transition:max-width .3s}.pixnet-happix-pilot__share-list.pixnet-happix-pilot__share-list--desktop.action{max-width:132px;min-width:88px}.pixnet-happix-pilot__share-list.pixnet-happix-pilot__share-list--mobile{bottom:45px;left:50%;max-height:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:max-height .3s;transition:max-height .3s}.pixnet-happix-pilot__share-list.pixnet-happix-pilot__share-list--mobile.action{max-height:42px}");var Qi=function(t){function e(t){var n;return Z(this,e),(n=Ce(this,Ae(e).call(this,t))).cssPrefix=n.getCssPrefix(),n.isMobile="mobile"===window.deviceType,n}return je(e,Ve),tt(e,[{key:"getTemplates",value:function(){var t='<span class="'.concat(this.cssPrefix,'__share-list__share-line"></span>');return'\n            <div class="'.concat(this.cssPrefix,'__share-list-mask"></div>\n            <div class="').concat(this.cssPrefix,'__share-icon icon">\n                <img class="icon__img" src="').concat("https://s.pixfs.net/common",'/icons/btn_share.svg" alt="分享" />\n                <img class="icon__img" src="').concat("https://s.pixfs.net/common",'/icons/btn_share-hover.svg" alt="分享 hover" />\n            </div>\n            <span class="pixnet-happix-pilot__share-amount amount-word"></span>\n            <div class="').concat(this.cssPrefix,"__share-list\n                ").concat(this.cssPrefix,"__share-list--").concat(this.isMobile?"mobile":"desktop",'">\n                ').concat(this.isMobile?t:"",'\n                <span class="').concat(this.cssPrefix,'__share-list__share-fb"></span>\n                <span class="').concat(this.cssPrefix,'__share-list__share-link"></span>\n            </div>\n        ')}},{key:"bindEvent",value:function(){var t=this,e=window.pix||{};this.shareList=$e.getElementByPostfix("share-list"),this.fbButton=this.shareList.getElementByPostfix("share-list__share-fb"),this.copyLinkButton=this.shareList.getElementByPostfix("share-list__share-link"),this.isMobile&&(this.lineButton=this.shareList.getElementByPostfix("share-list__share-line"),this.lineButton.bindEvent("click",(function(){Xi(t.getLINEShareLink()),ln({category:"functionBar",action:"shareClick",label:"shareLine"}),e.blogsharelog&&e.blogsharelog("line")}))),this.fbButton.bindEvent("click",(function(){Xi(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://www.facebook.com/sharer/sharer.php?\n        app_id=".concat(Re,"&display=popup&u=").concat(encodeURIComponent(t))}(location.href)),ln({category:"functionBar",action:"shareClick",label:"shareFB"}),e.blogsharelog&&e.blogsharelog("facebook")})),this.copyLinkButton.bindEvent("click",(function(){(function(){try{var t=document.createElement("input"),e=document.getElementById("header-prompt"),n=document.getElementsByTagName("body")[0],i=location.href;if(t.value=i,n.appendChild(t),navigator.userAgent.match(/ipad|ipod|iphone/i)){var o=t.contentEditable,a=t.readOnly,r=document.createRange(),s=window.getSelection();t.contentEditable=!0,t.readOnly=!0,r.selectNodeContents(t),s.removeAllRanges(),s.addRange(r),t.setSelectionRange(0,999999),t.contentEditable=o,t.readOnly=a}else t.select();document.execCommand("copy"),t.blur(),t.remove(),e&&(e.innerHTML="複製連結成功(・∀・)b",e.classList+=" prompt-success",setTimeout((function(){e.classList="header-prompt"}),2e3))}catch(t){console.log(exception)}})(),Xi(),ln({category:"functionBar",action:"shareClick",label:"shareLink"}),e.blogsharelog&&e.blogsharelog("link")}))}},{key:"getLINEShareLink",value:function(){var t=encodeURIComponent(location.href);return"https://social-plugins.line.me/lineit/share?url=".concat(t)}},{key:"getShareAmount",value:function(){var t=document.querySelector(".".concat(this.cssPrefix,"__share-amount"))||{},e=document.getElementsByTagName("body")[0].dataset.sharedsCount||"";t.innerText=Zi(e)}},{key:"render",value:function(){this.containerElement.setHTML(this.getTemplates()),this.bindEvent(),this.getShareAmount()}}]),e}();xn("@-webkit-keyframes pushAnimate{0%{-webkit-transform:scale(.5);transform:scale(.5)}50%{-webkit-transform:scale(1.4);transform:scale(1.4)}75%{-webkit-transform:scale(.8);transform:scale(.8)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes pushAnimate{0%{-webkit-transform:scale(.5);transform:scale(.5)}50%{-webkit-transform:scale(1.4);transform:scale(1.4)}75%{-webkit-transform:scale(.8);transform:scale(.8)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes tipAnimate{0%{-webkit-transform:translate(-50%,-130%);transform:translate(-50%,-130%);opacity:0}45%,to{-webkit-transform:translate(-50%,-300%);transform:translate(-50%,-300%);opacity:1}}@keyframes tipAnimate{0%{-webkit-transform:translate(-50%,-130%);transform:translate(-50%,-130%);opacity:0}45%,to{-webkit-transform:translate(-50%,-300%);transform:translate(-50%,-300%);opacity:1}}.pixnet-happix-pilot__recommend{position:relative}.pixnet-happix-pilot__recommend-tip{position:absolute;left:50%;top:50%;z-index:10;width:38px;height:38px;border-radius:50%;font-size:12px;text-align:center;line-height:38px;color:#fff;background-color:#ffa400;opacity:0;-webkit-animation-name:none;animation-name:none}.pixnet-happix-pilot__recommend-icon--recommended{overflow:auto;display:none}.pixnet-happix-pilot__recommend.done .pixnet-happix-pilot__recommend-icon{display:none}.pixnet-happix-pilot__recommend.done .pixnet-happix-pilot__recommend-icon--recommended{display:block}.pixnet-happix-pilot__recommend.pushAnimate .pixnet-happix-pilot__recommend-icon--recommended{-webkit-animation:pushAnimate .4s linear .1s;animation:pushAnimate .4s linear .1s}.pixnet-happix-pilot__recommend.pushAnimate .pixnet-happix-pilot__recommend-tip{-webkit-animation:tipAnimate .8s ease-out .3s;animation:tipAnimate .8s ease-out .3s}@media screen and (max-width:768px){.pixnet-happix-pilot__recommend-tip{left:15px;top:20px;width:25px;height:25px;line-height:25px}}");xn('@-webkit-keyframes popupAnimate{0%{background-size:0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0;background-position:50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%;opacity:1}to{background-size:8% 8%,2% 2%,4% 4%,6% 6%,8% 8%,2% 2%,6% 6%,2% 2%,6% 6%,2% 2%,8% 8%,2% 2%,6% 6%,8% 8%,8% 8%,6% 6%,4% 4%,4% 4%,4% 4%,8% 8%,6% 6%,4% 4%,2% 2%,4% 4%,4% 4%,6% 6%,8% 8%,4% 4%,8% 8%,2% 2%,4% 4%,4% 4%,8% 8%,2% 2%,4% 4%,6% 6%,8% 8%,2% 2%,4% 4%,6% 6%,6% 6%,6% 6%,6% 6%,4% 4%,6% 6%,6% 6%,2% 2%,6% 6%,8% 8%,6% 6%;background-position:86% 96%,135% 82%,32% 112%,121% 46%,68% 81%,104% 23%,28% 24%,51% 78%,139% 91%,101% 12%,118% 48%,24% 63%,113% 10%,126% 89%,60% 113%,48% 127%,124% 89%,134% 94%,92% 86%,30% 19%,12% 73%,133% 22%,119% 127%,99% 83%,21% 85%,15% 104%,42% 132%,16% 121%,122% 44%,52% 9%,32% 70%,5% 92%,92% 42%,75% 105%,125% 105%,45% 122%,47% 72%,5% 113%,137% 143%,62% 133%,5% 91%,25% 31%,66% 98%,8% 54%,44% 70%,116% 47%,102% 45%,5% 59%,31% 71%,147% 115%;opacity:0}}@keyframes popupAnimate{0%{background-size:0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0;background-position:50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%;opacity:1}to{background-size:8% 8%,2% 2%,4% 4%,6% 6%,8% 8%,2% 2%,6% 6%,2% 2%,6% 6%,2% 2%,8% 8%,2% 2%,6% 6%,8% 8%,8% 8%,6% 6%,4% 4%,4% 4%,4% 4%,8% 8%,6% 6%,4% 4%,2% 2%,4% 4%,4% 4%,6% 6%,8% 8%,4% 4%,8% 8%,2% 2%,4% 4%,4% 4%,8% 8%,2% 2%,4% 4%,6% 6%,8% 8%,2% 2%,4% 4%,6% 6%,6% 6%,6% 6%,6% 6%,4% 4%,6% 6%,6% 6%,2% 2%,6% 6%,8% 8%,6% 6%;background-position:86% 96%,135% 82%,32% 112%,121% 46%,68% 81%,104% 23%,28% 24%,51% 78%,139% 91%,101% 12%,118% 48%,24% 63%,113% 10%,126% 89%,60% 113%,48% 127%,124% 89%,134% 94%,92% 86%,30% 19%,12% 73%,133% 22%,119% 127%,99% 83%,21% 85%,15% 104%,42% 132%,16% 121%,122% 44%,52% 9%,32% 70%,5% 92%,92% 42%,75% 105%,125% 105%,45% 122%,47% 72%,5% 113%,137% 143%,62% 133%,5% 91%,25% 31%,66% 98%,8% 54%,44% 70%,116% 47%,102% 45%,5% 59%,31% 71%,147% 115%;opacity:0}}.pixnet-happix-pilot__recommend:before{z-index:10;content:"";position:absolute;display:block;left:50%;top:-10%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:102px;height:102px;background-image:radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%),radial-gradient(#ffcb12,#ffcb12 70%,transparent 71%);background-size:0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0,0 0;background-position:50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%,50% 50%;background-repeat:no-repeat;pointer-events:none}.pixnet-happix-pilot__recommend.pushAnimate:before{-webkit-animation:popupAnimate .8s ease-out .1s;animation:popupAnimate .8s ease-out .1s}');var to=function(t){function e(t){var n;return Z(this,e),(n=Ce(this,Ae(e).call(this,t))).cssPrefix=n.getCssPrefix(),n.recommendCount=0,n}return je(e,Ve),tt(e,[{key:"bindEvents",value:function(){var t=this;this.containerElement.bindEvent("click",(function(){return t.postRecommendationsEvent()}))}},{key:"getTemplates",value:function(){return'\n            <div class="'.concat(this.cssPrefix,'__recommend">\n                <div class="').concat(this.cssPrefix,'__recommend-icon icon">\n                    <img class="icon__img" src="').concat("https://s.pixfs.net/common",'/icons/btn_rocket_g.svg" alt="推文" />\n                    <img class="icon__img" src="').concat("https://s.pixfs.net/common",'/icons/btn_rocket-hover.svg" alt="推文 hover" />\n                </div>\n                <div class="').concat(this.cssPrefix,"__recommend-icon icon ").concat(this.cssPrefix,'__recommend-icon--recommended">\n                    <img src="').concat("https://s.pixfs.net/common",'/icons/btn_rocket.svg" alt="已推文" />\n                </div>\n                <div class="').concat(this.cssPrefix,'__recommend-tip">+1</div>\n            </div>\n            <span class="').concat(this.cssPrefix,'__recommend-amount amount-word">0</span>\n        ')}},{key:"getRecommendAmount",value:function(){var t=this,e=this.containerElement.getElementByPostfix("recommend-amount");window.pix&&void 0===pix.member_token?setTimeout((function(){t.getRecommendAmount()}),100):Ki.getUrlRecommendations(document.body.dataset.articleId).then((function(e){e.error||t.renderRecommendStatus(e.data)}),(function(){e.setHTML(String(0))}))}},{key:"postRecommendationsEvent",value:function(){var t=this;if(window.pix&&null===window.pix.member_token)location.href=on.getOptions().getLoginURL();else{var e=this.containerElement.getElementByPostfix("recommend"),n=this.containerElement.getElementByPostfix("recommend-tip");this.recommendCount<20?Ki.postUrlRecommendations({article_id:document.body.dataset.articleId,add_recommend_count:1}).then((function(e){ln({category:"functionBar",action:"pushClick"}),i(),n.setHTML("+".concat(e.member_recommend_count)),t.renderRecommendStatus(e)})):(i(),n.setHTML("+".concat(this.recommendCount)))}function i(){e.removeClass("pushAnimate"),setTimeout((function(){e.addClass("pushAnimate")}),100)}}},{key:"renderRecommendStatus",value:function(t){var e=this.containerElement.getElementByPostfix("recommend-amount"),n=this.containerElement.getElementByPostfix("recommend");e.setHTML(Zi(t.total_recommend_count)),t.member_recommend_count&&n.addClass("done")}},{key:"render",value:function(){this.containerElement.setHTML(this.getTemplates()),this.bindEvents(),this.getRecommendAmount()}}]),e}(),eo={getItem:function(t){return t&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(t,e,n,i,o,a){if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;var r="";if(n)switch(n.constructor){case Number:r=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:r="; expires="+n;break;case Date:r="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+r+(o?"; domain="+o:"")+(i?"; path="+i:"")+(a?"; secure":""),!0},removeItem:function(t,e,n){return!!this.hasItem(t)&&(document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(e?"; path="+e:""),!0)},hasItem:function(t){return!(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=t.length,n=0;n<e;n++)t[n]=decodeURIComponent(t[n]);return t}},no=function(t,e){var n=".pixnet.net".concat(window.pix&&window.pix.domain_append||"");eo.setItem(t,e,null,null,n)},io=function(t,e){if(t){var n=eo.getItem(t),i=Ln.now();return Ln.withinSpecificHours(n,i,e)}return!1};xn('.pixnet-happix-pilot__launcher-bar{position:fixed;right:0;bottom:0;left:0;width:100vw;height:45px;background-color:#fff;-webkit-box-shadow:0 -2px 20px 0 rgba(0,0,0,.1);box-shadow:0 -2px 20px 0 rgba(0,0,0,.1)}.pixnet-happix-pilot__launcher-bar>*{-webkit-font-smoothing:antialiased}.pixnet-happix-pilot__launcher-bar-mask{position:fixed;top:0;bottom:0;z-index:40;width:100vw;height:100%;background:rgba(0,0,0,.6);opacity:0;pointer-events:none;will-change:opacity}.pixnet-happix-pilot__launcher-bar-mask.active{opacity:1;pointer-events:auto}.pixnet-happix-pilot__launcher-bar__wrapper{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;height:100%;margin:auto;background:#fff}.pixnet-happix-pilot__launcher-bar__function{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;padding:0}.pixnet-happix-pilot__launcher-bar__function .container-item{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;list-style-type:none}.pixnet-happix-pilot__launcher-bar__function .container-item:first-child{margin-left:15px}.pixnet-happix-pilot__launcher-bar__function .container-item+.container-item{margin-left:22px}.pixnet-happix-pilot__launcher-bar__function .container-item .icon{width:28px;height:28px}.pixnet-happix-pilot__launcher-bar__function .container-item .icon>img{width:100%;height:auto}.pixnet-happix-pilot__launcher-bar__function .container-item .icon>img:nth-child(n+2){display:none}.pixnet-happix-pilot__launcher-bar__function .container-item .amount-word{position:absolute;top:0;right:-22px;width:21px;height:14px;font-size:12px;font-family:Arial;color:#5e5f6a}.pixnet-happix-pilot__launcher-bar__share{position:relative;cursor:pointer}.pixnet-happix-pilot__launcher-bar__comment{cursor:pointer}.pixnet-happix-pilot__launcher-bar__button-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:1;padding:0 6px;background:#6eacf5;border-top-left-radius:22px;border-bottom-left-radius:22px;-webkit-transition:.5s;transition:.5s}.pixnet-happix-pilot__launcher-bar__button-container:after{content:"";position:absolute;left:100%;display:block;width:100vw;height:100%;background:#6eacf5}.pixnet-happix-pilot__launcher-bar__button-container .container-item+.container-item{margin-left:20px}.pixnet-happix-pilot__launcher-bar__button-container__gift-button{width:30px;height:30px;border-radius:100%}.pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner{width:30px;height:30px;background-color:#fff;border-radius:100%;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_gift.svg)}.pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner:after{content:"";display:inline-block;width:30px;height:30px;background-color:#f6f6f6;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_gift_cta_no.svg);border-radius:100%;cursor:not-allowed}.activat-gift .pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner:after{opacity:0;cursor:pointer}.gift-bounce .pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner{-webkit-animation:bounce 1s;animation:bounce 1s}.gift-scale .pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner{-webkit-animation:scale .6s;animation:scale .6s}.pixnet-happix-pilot__launcher-bar__button-container .notify{position:relative;border-radius:50%;-webkit-box-shadow:0 0 0 0 #fff;box-shadow:0 0 0 0 #fff;-webkit-animation:happix_pulse 1.5s 5;animation:happix_pulse 1.5s 5}.pixnet-happix-pilot__launcher-bar__button-container__happix-button-img{display:block;width:30px;height:30px;cursor:pointer}@media screen and (max-width:768px){.pixnet-happix-pilot__launcher-bar.showed-gift{-webkit-box-shadow:none;box-shadow:none}.pixnet-happix-pilot__launcher-bar:before{content:"";position:absolute;top:0;z-index:1;display:block;width:100vw;height:2px;background:#6eacf5;-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0);-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;will-change:transform}.showed-gift.pixnet-happix-pilot__launcher-bar:before{-webkit-transform:translateZ(0);transform:translateZ(0)}.showed-gift .pixnet-happix-pilot__launcher-bar__button-container{border-top-left-radius:0}}@-webkit-keyframes happix_pulse{0%{-webkit-transform:scale(1);transform:scale(1)}70%{-webkit-transform:scale(1.1);transform:scale(1.1);-webkit-box-shadow:0 0 0 7px hsla(0,0%,100%,0);box-shadow:0 0 0 7px hsla(0,0%,100%,0)}to{-webkit-transform:scale(1);transform:scale(1);-webkit-box-shadow:0 0 0 0 hsla(0,0%,100%,0);box-shadow:0 0 0 0 hsla(0,0%,100%,0)}}@keyframes happix_pulse{0%{-webkit-transform:scale(1);transform:scale(1)}70%{-webkit-transform:scale(1.1);transform:scale(1.1);-webkit-box-shadow:0 0 0 7px hsla(0,0%,100%,0);box-shadow:0 0 0 7px hsla(0,0%,100%,0)}to{-webkit-transform:scale(1);transform:scale(1);-webkit-box-shadow:0 0 0 0 hsla(0,0%,100%,0);box-shadow:0 0 0 0 hsla(0,0%,100%,0)}}@-webkit-keyframes bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0,-30px,0);transform:translate3d(0,-30px,0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06)}70%{-webkit-transform:translate3d(0,-15px,0);transform:translate3d(0,-15px,0)}90%{-webkit-transform:translate3d(0,-4px,0);transform:translate3d(0,-4px,0)}}@keyframes bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0,-30px,0);transform:translate3d(0,-30px,0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06)}70%{-webkit-transform:translate3d(0,-15px,0);transform:translate3d(0,-15px,0)}90%{-webkit-transform:translate3d(0,-4px,0);transform:translate3d(0,-4px,0)}}@-webkit-keyframes scale{0%{-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out;-webkit-transform:scale(1.5);transform:scale(1.5)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes scale{0%{-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out;-webkit-transform:scale(1.5);transform:scale(1.5)}to{-webkit-transform:scale(1);transform:scale(1)}}');var oo=function(t){function e(t){var n;return Z(this,e),(n=Ce(this,Ae(e).call(this,t))).options=on.getOptions(),n.happixMessengerData={data:{},setDataFlag:!1},n.visibleState={happixMessengerState:!1,giftState:!1,happixNotificationState:!1,shareListState:!1,commentBlockState:!1},n.notiShowedIsActed=io(ze,168),n.showGiftNotification=n.showGiftNotification.bind(Ee(Ee(n))),n.hideGiftNotification=n.hideGiftNotification.bind(Ee(Ee(n))),n.showHappixMessenger=n.showHappixMessenger.bind(Ee(Ee(n))),n.hideHappixMessenger=n.hideHappixMessenger.bind(Ee(Ee(n))),n}return je(e,Ve),tt(e,[{key:"getSpecialButton",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__launcher-bar__button-container__special-button container-item">\n                <img class="').concat(t,'__launcher-bar__button-container__happix-button-img"\n                    data-happix-visa-icon\n                    src="').concat(Fe,"/").concat({visa:"visa_head.png"}[On.rules.ruleType],'"/>\n            </div>\n            ')}},{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__launcher-bar-mask"></div>\n            <div class="').concat(t,'__launcher-bar"\n                style="z-index:').concat(this.options.getPilotZIndex(),'"\n            >\n                <div\n                    class="').concat(t,'__launcher-bar__wrapper"\n                    style="max-width: ').concat(this.options.getPilotWidth(),'px"\n                >\n                    <ul class="').concat(t,'__launcher-bar__function">\n                        <li class="').concat(t,'__launcher-bar__recommend container-item"></li>\n                        <li class="').concat(t,'__launcher-bar__comment container-item"></li>\n                        <li class="').concat(t,'__launcher-bar__share container-item"></li>\n                    </ul>\n\n                    <div class="').concat(t,'__launcher-bar__button-container">\n                        ').concat(On.isActive?this.getSpecialButton():"",'\n                        <div class="').concat(t,'__launcher-bar__button-container__gift-button container-item">\n                            <div class="').concat(t,'__launcher-bar__button-container__gift-button-inner"></div>\n                        </div>\n                        <div class="').concat(t,'__launcher-bar__button-container__happix-button container-item">\n                            <img class="').concat(t,'__launcher-bar__button-container__happix-button-img"\n                                src="').concat(Fe,'/btn_happix_guide.svg"/>\n                        </div>\n                    </div>\n                </div>\n                <div class="').concat(t,'__launcher-bar__happix-messenger"></div>\n                <div class="').concat(t,'__launcher-bar__special-messenger"></div>\n            </div>\n            <div class="').concat(t,'__launcher-bar__gift-notification"></div>\n            <div class="').concat(t,'__launcher-bar__happix-notification"></div>\n            <div class="').concat(t,'__launcher-bar__special-notification"></div>\n        ')}},{key:"getElements",value:function(){this.maskElement=$e.getElementByPostfix("launcher-bar-mask"),this.launcherBarElement=$e.getElementByPostfix("launcher-bar"),this.buttonContainerElement=this.launcherBarElement.getElementByPostfix("launcher-bar__button-container"),this.giftButtonElement=this.launcherBarElement.getElementByPostfix("launcher-bar__button-container__gift-button"),this.happixButtonElement=this.launcherBarElement.getElementByPostfix("launcher-bar__button-container__happix-button"),this.specialButtonElement=this.launcherBarElement.getElementByPostfix("launcher-bar__button-container__special-button"),this.happixNotificationElement=$e.getElementByPostfix("launcher-bar__happix-notification"),this.specialNotificationElement=$e.getElementByPostfix("launcher-bar__special-notification"),this.giftNotificationElement=$e.getElementByPostfix("launcher-bar__gift-notification"),this.happixMessengerElement=this.launcherBarElement.getElementByPostfix("launcher-bar__happix-messenger"),this.recommendElement=this.launcherBarElement.getElementByPostfix("launcher-bar__recommend"),this.commentElement=this.launcherBarElement.getElementByPostfix("launcher-bar__comment"),this.shareElement=this.launcherBarElement.getElementByPostfix("launcher-bar__share")}},{key:"bindEvents",value:function(){var t=this;this.maskElement.bindEvent("click",(function(){return t.closeShareList()})),this.happixNotificationElement.bindEvent("click",(function(){t.showHappixMessenger(),ln({category:"pilot-happixSpeak",action:"happixClick"})})).bindEvent("close",(function(){t.hideHappixNotification(),ln({category:"pilot-happixSpeak",action:"happixClose"})})),this.giftNotificationElement.bindEvent("close",(function(){return t.hideGiftNotification()})),this.giftButtonElement.bindEvent("click",(function(){return t.clickGiftButton()})),this.happixMessengerElement.bindEvent("close",(function(){return t.hideHappixMessenger()})),this.happixButtonElement.bindEvent("click",(function(){return t.clickHappixButton()})),On.isActive&&this.specialButtonElement.bindEvent("click",(function(){return t.clickSpecialButton()})),this.commentElement.bindEvent("click",(function(){t.activateCommentBlock(),ln({category:"functionBar",action:"commentClick"})})),this.shareElement.bindEvent("click",(function(){return t.toggleShareList()}))}},{key:"setData",value:function(t,e,n,i,o){this.happixMessengerData.data={weather:t,memberInfo:e,coupon:n,task:i},this.happixNotification.setMessage(o),On.setTaskData(t,e)}},{key:"setGiftNotificationData",value:function(t){on.setOptions({giftNotificationContent:t}),sn(t.widget_content.ga,on.getOptions().getMemberUniqid()),hn("CTA_Load"),this.activateGiftNotificationFlow()}},{key:"renderGiftNotification",value:function(){var t=on.getOptions().getGiftNotificationContent();this.giftNotification=new dn(this.giftNotificationElement,t).render().hide()}},{key:"checkIsSpecialNotificationExit",value:function(){var t=this.specialNotificationElement.getElementByPostfix("special-notification");return t.getElement()&&!t.hasClass("hidden")}},{key:"clickGiftButton",value:function(){var t=this.checkIsSpecialNotificationExit(),e=this.visibleState.giftState,n={category:"pilot-CTA",action:e?"giftClickClose":"giftClickOpen"};e?this.hideGiftNotification(n):this.showGiftNotification(n),On.sendAnalytic({category:t?"pilot_w_dialog":"pilot_no_dialog",action:e?"click_gift_icon_to_hide_CTA":"click_gift_icon_to_show_CTA"})}},{key:"clickHappixButton",value:function(){var t=this.checkIsSpecialNotificationExit(),e={category:"pilot-happixSpeak",action:"smallHappixClick"};this.visibleState.happixMessengerState?this.hideHappixMessenger(e):this.showHappixMessenger(e),On.sendAnalytic({category:t?"pilot_w_dialog":"pilot_no_dialog",action:"click_happix_icon_to_show_missions"})}},{key:"clickSpecialButton",value:function(){var t=this.checkIsSpecialNotificationExit(),e=document.querySelector(".article-body--sakura-animation");e&&e.classList.remove("article-body--sakura-animation"),On.showSpecialMessenger(),On.sendAnalytic({category:t?"pilot_w_dialog":"pilot_no_dialog",action:"click_special_icon_to_show_missions"})}},{key:"showHappixNotification",value:function(){this.specialNotification=this.specialNotificationElement.getElementByPostfix("special-notification"),this.happixNotification.show(),this.checkIsSpecialNotificationExit()&&this.specialNotification.setStyle("bottom","117px"),this.happixButtonElement.removeClass("notify"),no(ze,Ln.now()),this.updateState("happixNotificationState",!0)}},{key:"hideHappixNotification",value:function(){var t=this;this.happixNotification.hide(),this.checkIsSpecialNotificationExit()&&this.specialNotification.setStyle("bottom","47px"),setTimeout((function(){t.happixButtonElement.addClass("notify")}),334),this.updateState("happixNotificationState",!1)}},{key:"showGiftNotification",value:function(t){this.giftNotification&&(this.giftNotification.show(),this.launcherBarElement.addClass("showed-gift").removeClass("gift-scale"),t&&ln(t),this.updateState("giftState",!0))}},{key:"hideGiftNotification",value:function(t){this.giftNotification&&this.giftNotification.hide(),this.launcherBarElement.removeClass("showed-gift").removeClass("gift-bounce").addClass("gift-scale"),t&&ln(t),this.updateState("giftState",!1)}},{key:"showHappixMessenger",value:function(t){var e=this.happixMessengerData,n=e.data;e.setDataFlag||(this.happixMessenger.setData(n),this.happixMessengerData.setDataFlag=!0),this.happixMessenger.show(),this.happixButtonElement.removeClass("notify"),t&&ln(t),this.updateState("happixMessengerState",!0)}},{key:"hideHappixMessenger",value:function(t){this.happixMessenger.hide(),t&&ln(t),this.updateState("happixMessengerState",!1)}},{key:"toggleShareList",value:function(){this.shareElement.getElementByPostfix("share-list").hasClass("action")?this.closeShareList():this.openShareList()}},{key:"openShareList",value:function(){this.maskElement.setStyle("transition","opacity .3s").addClass("active"),this.shareElement.getElementByPostfix("share-list").addClass("action"),this.updateState("shareListState",!0)}},{key:"closeShareList",value:function(){this.maskElement.removeClass("active"),this.shareElement.getElementByPostfix("share-list").removeClass("action"),this.updateState("shareListState",!1)}},{key:"activateCommentBlock",value:function(){if("mobile"===(window.deviceType||"")){var t=document.getElementById("comment-block");if(!t)return;return t.classList.add("active"),void this.updateState("commentBlockState",!0)}var e=document.getElementById("comment_text");e&&(window.scrollTo(0,e.offsetBottom-50),e.focus())}},{key:"activateHappixNotificationFlow",value:function(){var t=this;this.notiShowedIsActed?On.showSpecialNotificationFlow():(On.showSpecialNotificationFlow(),setTimeout((function(){t.hasGiftNotification()||(t.showHappixNotification(),setTimeout((function(){t.hideHappixNotification(),t.happixButtonElement.addClass("notify")}),1e4))}),1e4),ln({category:"pilot-happixSpeak",action:"happixImpression"}))}},{key:"activateGiftNotificationFlow",value:function(){var t=this,e=this.launcherBarElement;window.innerHeight<530?e.addClass("activat-gift"):On.showSpecialNotificationFlow(!0,(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;return t.activeCta(e,n)}))}},{key:"activeCta",value:function(t,e){var n=this;this.renderGiftNotification(),setTimeout((function(){t.addClass("activat-gift").addClass("gift-bounce"),setTimeout((function(){return n.showGiftNotification()}),800)}),e)}},{key:"hasGiftNotification",value:function(){return this.launcherBarElement.hasClass("activat-gift")}},{key:"updateState",value:function(t,e){this.visibleState[t]=e,this.checkState(t)}},{key:"checkState",value:function(t){var e=this,n=K(this.visibleState).filter((function(t){return e.visibleState[t]})),i=n.length;"happixNotificationState"!==t&&i>1&&this.closeOpenedButton(n.filter((function(e){return e!==t}))[0])}},{key:"closeOpenedButton",value:function(t){var e=this,n={happixMessengerState:this.hideHappixMessenger,giftState:this.hideGiftNotification,shareListState:function(){return e.closeShareList()},commentBlockState:function(){return e.updateState("commentBlockState",!1)}};n[t]&&n[t]()}},{key:"render",value:function(){var t=this;return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this.happixNotification=new gn(this.happixNotificationElement).render(),this.happixMessenger=new Dn(this.happixMessengerElement,{dangling:!0}).render(),this.Recommend=new to(this.recommendElement).render(),this.Comment=new Ji(this.commentElement).render(),this.Share=new Qi(this.shareElement).render(),io("pilot_happix_pulse_animation_timestamp",168)||setTimeout((function(){no("pilot_happix_pulse_animation_timestamp",Ln.now()),t.happixButtonElement.addClass("notify")}),12e3),On.setLaunchBarData(this),this}}]),e}(),ao=Math.floor;V(V.S,"Number",{isInteger:function(t){return!O(t)&&isFinite(t)&&ao(t)===t}});var ro=m.Number.isInteger;xn(".pixnet-happix-pilot__launcher-bar-desktop{position:fixed;z-index:1;right:0;bottom:380px;left:0;width:83px;font-family:Noto Sans CJK TC,PingFang TC,Microsoft JhengHei,Helvetica Neue,Helvetica,Verdana,sans-serif}.pixnet-happix-pilot__launcher-bar-desktop__wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transform:translate(-53px);transform:translate(-53px);-webkit-transition:all .5s;transition:all .5s}.pixnet-happix-pilot__launcher-bar-desktop__wrapper.action{-webkit-transform:translate(0);transform:translate(0)}.pixnet-happix-pilot__launcher-bar-desktop__wrapper.action .pixnet-happix-pilot__launcher-bar-desktop__collapse{border-top-right-radius:6px;border-bottom-right-radius:6px;border-top-left-radius:0;border-bottom-left-radius:0;-webkit-transform:rotate(0);transform:rotate(0)}.pixnet-happix-pilot__launcher-bar-desktop>*{-webkit-font-smoothing:antialiased}.pixnet-happix-pilot__launcher-bar-desktop *{-webkit-box-sizing:border-box;box-sizing:border-box}.pixnet-happix-pilot__launcher-bar-desktop__function{position:relative;margin:0;padding:5px 10px;width:60px;background:#f6f6f6;-webkit-box-shadow:0 0 4px 0 rgba(0,0,0,.3);box-shadow:0 0 4px 0 rgba(0,0,0,.3);border-top-right-radius:6px;border-bottom-right-radius:6px;border-top-left-radius:0;border-bottom-left-radius:0}.pixnet-happix-pilot__launcher-bar-desktop__function .container-item{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:10px 0;list-style-type:none;text-align:center;border-radius:50%}.pixnet-happix-pilot__launcher-bar-desktop__function .container-item .icon{position:relative;z-index:2;overflow:hidden;width:40px;height:40px;background-color:#fff;background-repeat:no-repeat;background-position:50%;border-radius:50%}.pixnet-happix-pilot__launcher-bar-desktop__function .container-item .icon:hover>.icon__img{-webkit-transform:translateY(-100%);transform:translateY(-100%)}.pixnet-happix-pilot__launcher-bar-desktop__function .container-item .icon>img{padding:5px}.pixnet-happix-pilot__launcher-bar-desktop__collapse{border:0;width:20px;height:30px;background-color:#6eacf5;background-image:url(https://s.pixfs.net/common/icons/ic_left_white_arrow.svg);background-size:30px;background-position:50%;background-repeat:no-repeat;outline:0;cursor:pointer;border-top-left-radius:6px;border-bottom-left-radius:6px;-webkit-box-shadow:0 0 4px 0 rgba(0,0,0,.3);box-shadow:0 0 4px 0 rgba(0,0,0,.3);-webkit-transform:rotate(180deg);transform:rotate(180deg)}.pixnet-happix-pilot__launcher-bar-desktop__share{position:relative}.pixnet-happix-pilot__launcher-bar-desktop__comment,.pixnet-happix-pilot__launcher-bar-desktop__recommend,.pixnet-happix-pilot__launcher-bar-desktop__share{cursor:pointer}");var so=function(t){function e(t){return Z(this,e),Ce(this,Ae(e).call(this,t))}return je(e,Ve),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__launcher-bar-desktop__wrapper">\n                <ul class="').concat(t,'__launcher-bar-desktop__function">\n                    <li class="').concat(t,'__launcher-bar-desktop__recommend container-item"></li>\n                    <li class="').concat(t,'__launcher-bar-desktop__comment container-item"></li>\n                    <li class="').concat(t,'__launcher-bar-desktop__share container-item"></li>\n                </ul>\n                <button class="').concat(t,'__launcher-bar-desktop__collapse"></button>\n            </div>\n        ')}},{key:"getElements",value:function(){this.launcherBarWrapperElement=$e.getElementByPostfix("launcher-bar-desktop__wrapper"),this.launcherBarElement=$e.getElementByPostfix("launcher-bar-desktop__function"),this.recommendElement=this.launcherBarElement.getElementByPostfix("launcher-bar-desktop__recommend"),this.commentElement=this.launcherBarElement.getElementByPostfix("launcher-bar-desktop__comment"),this.shareElement=this.launcherBarElement.getElementByPostfix("launcher-bar-desktop__share"),this.collapseElement=this.launcherBarWrapperElement.getElementByPostfix("launcher-bar-desktop__collapse")}},{key:"bindEvents",value:function(){var t=this;this.shareElement.bindEvent("click",(function(){return t.toggleShareList()})),this.collapseElement.bindEvent("click",(function(){return t.toggleLauncherBar()})),this.commentElement.bindEvent("click",(function(){var t=document.getElementById("comment_text"),e=document.getElementById("comment_form");e&&(window.scrollTo(0,e.offsetTop+e.offsetHeight-50),ln({category:"functionBar",action:"commentClick"})),t&&t.focus()}))}},{key:"toggleShareList",value:function(){this.shareElement.getElementByPostfix("share-list").hasClass("action")?this.closeShareList():this.openShareList()}},{key:"toggleLauncherBar",value:function(){var t=this.launcherBarWrapperElement,e=this.shareElement.getElementByPostfix("share-list"),n=t.hasClass("action");n?t.removeClass("action"):t.addClass("action"),ln({category:"functionBar",action:n?"closeFunctionBar":"openFunctionBar"}),e.hasClass("action")&&this.closeShareList()}},{key:"openShareList",value:function(){this.shareElement.getElementByPostfix("share-list").addClass("action")}},{key:"closeShareList",value:function(){this.shareElement.getElementByPostfix("share-list").removeClass("action")}},{key:"render",value:function(){var t=this;return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this.Comment=new Ji(this.commentElement).render(),this.Share=new Qi(this.shareElement).render(),this.Recommend=new to(this.recommendElement).render(),setTimeout((function(){t.launcherBarWrapperElement.addClass("action")})),this}}]),e}();xn('.pixnet-happix-pilot__launcher-bubble{position:fixed}.pixnet-happix-pilot__launcher-bubble>*{-webkit-font-smoothing:antialiased}.pixnet-happix-pilot__launcher-bubble__wrapper{position:fixed;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:right;-ms-flex-pack:right;justify-content:right;max-height:80px}.pixnet-happix-pilot__launcher-bubble__wrapper.hidden{visibility:hidden}.pixnet-happix-pilot__launcher-bubble__noti_container{position:relative;top:5px;margin:0 8px 0 25px;cursor:pointer}.pixnet-happix-pilot__launcher-bubble__noti_container.hidden{overflow:hidden;opacity:0;-webkit-transform:translateX(30px);transform:translateX(30px);-webkit-transition:opacity .3s linear,-webkit-transform .2s linear;transition:opacity .3s linear,-webkit-transform .2s linear;transition:opacity .3s linear,transform .2s linear;transition:opacity .3s linear,transform .2s linear,-webkit-transform .2s linear}.pixnet-happix-pilot__launcher-bubble__noti_container:after{content:"";position:absolute;top:0;right:-8px;display:inline-block;width:8px;height:16px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/conversation_black@2x.png) no-repeat;background-size:contain}.pixnet-happix-pilot__launcher-bubble__noti_msg{position:relative;padding:12px 15px;font-size:13px;font-weight:500;color:#fff;letter-spacing:1px;border-radius:20px;border-top-right-radius:0;background-color:rgba(0,0,0,.8)}.pixnet-happix-pilot__launcher-bubble__btn_close_alpha{position:absolute;top:-25px;left:-17px;cursor:pointer}.pixnet-happix-pilot__launcher-bubble__btn_happix_ufo{-webkit-box-flex:0;-ms-flex:none;flex:none;width:70px;height:80px;-o-object-fit:contain;object-fit:contain;cursor:pointer}@media screen and (max-width:768px){.pixnet-happix-pilot__launcher-bubble{bottom:0}}@media screen and (min-width:769px){.pixnet-happix-pilot__launcher-bubble__noti_container{max-width:240px}}');var po=function(t){function e(t){var n;return Z(this,e),(n=Ce(this,Ae(e).call(this,t))).cookiesData=JSON.parse(eo.getItem("pilot_bubble"))||{},n.happixMessengerData={data:{},setDataFlag:!1},n.showHappixGuideMsg=!1,n.configBubbleFixedPosition={configPosition:on.getOptions().getBubbleFixedPosition(),get hasConfigPosition(){var t=this;return K(this.configPosition).some((function(e){return ro(t.configPosition[e])}))}},n.showHappixMessenger=n.showHappixMessenger.bind(Ee(Ee(n))),n.hideHappixMessenger=n.hideHappixMessenger.bind(Ee(Ee(n))),n.clickHappix=n.clickHappix.bind(Ee(Ee(n))),n.dragHappix=n.dragHappix.bind(Ee(Ee(n))),n.setHappixPosition=n.setHappixPosition.bind(Ee(Ee(n))),n}return je(e,Ve),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=on.getOptions();return'\n            <div class="'.concat(t,'__launcher-bar-desktop"></div>\n            <div class="').concat(t,'__launcher-bubble"\n                style="max-width: ').concat(e.getPilotWidth(),"px; z-index: ").concat(e.getPilotZIndex(),'"\n            >\n                <div class="').concat(t,'__launcher-bubble__wrapper">\n                    <div class="').concat(t,'__launcher-bubble__noti_container hidden" style="display: none;">\n                        <div class="').concat(t,'__launcher-bubble__noti_msg"></div>\n                        <img\n                            class="').concat(t,'__launcher-bubble__btn_close_alpha"\n                            src="').concat(Fe,'/btn-close-alpha.svg"\n                        >\n                    </div>\n                    <img\n                        class="').concat(t,'__launcher-bubble__btn_happix_ufo"\n                        src="').concat(Fe,'/btn-happix-ufo.png"\n                        srcset="').concat(Fe,"/btn-happix-ufo@2x.png 2x,\n                                ").concat(Fe,'/btn-happix-ufo@3x.png 3x"\n                    >\n                </div>\n                <div class="').concat(t,'__launcher-bubble__happix-messenger"></div>\n            </div>')}},{key:"getElements",value:function(){this.launchBubbleContainerElement=$e.getElementByPostfix("launcher-bubble"),this.happix=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__btn_happix_ufo"),this.notificationContainerElement=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__noti_container"),this.notificationMsg=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__noti_msg"),this.closeBtn=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__btn_close_alpha"),this.happixMessengerElement=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__happix-messenger"),this.happixWrapper=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__wrapper"),this.functionItemElement=$e.getElementByPostfix("launcher-bar-desktop")}},{key:"bindEvents",value:function(){var t=this;this.configBubbleFixedPosition.hasConfigPosition||this.happixWrapper.bindEvent("mousedown",this.dragHappix),this.happixMessengerElement.bindEvent("close",this.hideHappixMessenger),this.happixWrapper.bindEvent("click",this.clickHappix),this.happixWrapper.bindEvent("touchend",(function(e){t.happixWrapper.unbindEvent("mousedown",t.dragHappix),t.happixWrapper.unbindEvent("click",t.clickHappix),t.clickHappix(e)}))}},{key:"setData",value:function(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"嗨～點一點領航員Happix的頭，有專屬於你的會員驚喜喲！";this.happixMessengerData.data={weather:t,memberInfo:e,coupon:n,task:i},this.showHappixGuideMsg&&(this.notificationMsg.setHTML(o),this.notificationContainerElement.removeClass("hidden").setStyle("display","block"),ln({category:"pilot-happixSpeak",action:"happixImpression"})),this.bindCloseEvent()}},{key:"expandNotification",value:function(){io(ze,168)||(this.showHappixGuideMsg=!0,no(ze,Ln.now()))}},{key:"collapseNotification",value:function(){this.notificationContainerElement.addClass("hidden"),this.hideElem(this.notificationContainerElement,300)}},{key:"bindCloseEvent",value:function(){var t=this;this.closeBtn.bindEvent("click",(function(e){e.stopPropagation(),t.collapseNotification(),ln({category:"pilot-happixSpeak",action:"happixClose"})}))}},{key:"clickHappix",value:function(t){var e=this,n=t.target.className.match("launcher-bubble__btn_happix_ufo");this.happixWrapper.addClass("hidden"),setTimeout((function(){e.showHappixMessenger()}),100),ln({category:"pilot-happixSpeak",action:n?"smallHappixClick":"happixClick"})}},{key:"showHappixMessenger",value:function(){var t=this.happixMessengerData,e=t.data;t.setDataFlag||(this.happixMessenger.setData(e),this.happixMessengerData.setDataFlag=!0),this.happixMessenger.show()}},{key:"hideHappixMessenger",value:function(){this.happixWrapper.removeClass("hidden"),this.happixMessenger.hide()}},{key:"calcDraggableHappixMoveAt",value:function(t,e,n){var i=t.top,o=t.left,a=t.width,r=t.height,s=e.clientX,p=e.clientY,c=n.pageX,l=n.pageY,h=window,f=h.innerWidth,u=f-a,x=h.innerHeight-r,d=c-(s-o),g=l-(p-i)-h.scrollY;return{rightMoveAt:f-(d<0?0:d>u?u:d)-a,topMoveAt:g<45?45:g>x?x:g}}},{key:"dragHappix",value:function(t){var e=this,n=!1,i=this.happixWrapper.getElement(),o=i.getBoundingClientRect();i.ondragstart=function(){return!1},document.onmousemove=function(a){n=!0;var r=e.calcDraggableHappixMoveAt(o,t,a),s=r.rightMoveAt,p=r.topMoveAt;i.style.right="".concat(s,"px"),i.style.top="".concat(p,"px"),no("pilot_bubble",Wn({happixWrapperPosition:{right:s,top:p},tipTimestamp:Ln.now()}))},document.onmouseup=function(){n?(e.happixWrapper.unbindEvent("click",e.clickHappix),ln({category:"pilot-happixSpeak",action:"smallHappixDrag"})):e.happixWrapper.bindEvent("click",e.clickHappix),document.onmousemove=null,document.onmouseup=null}}},{key:"initHappixPosition",value:function(){var t=this.cookiesData.happixWrapperPosition,e=on.getOptions().getPilotWidth(),n=this.happixWrapper.getElement().getBoundingClientRect().height,i={right:window.innerWidth>e?(window.innerWidth-e)/2+10:10,top:window.innerHeight-n-30},o=this.configBubbleFixedPosition,a=o.configPosition;o.hasConfigPosition?this.setHappixPosition(a):t?this.setHappixPosition(t):this.setHappixPosition(i)}},{key:"setHappixPosition",value:function(t){var e=this;K(t).forEach((function(n){e.happixWrapper.setStyle(n,"".concat(t[n],"px"))}))}},{key:"hideElem",value:function(t,e){setTimeout((function(){return t.setStyle("display","none")}),e)}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this.initHappixPosition(),this.expandNotification(),this.functionItem=new so(this.functionItemElement).render(),this.happixMessenger=new Dn(this.happixMessengerElement).render().hide(),this}}]),e}(),co="desktop"===window.deviceType,lo=document.createElement("div"),ho=co?".main-container":"#main-content",fo=co?"bubble":"bar";lo.id="pilot",document.querySelector(ho).appendChild(lo);var uo=pix.domain_append?"http":"https";window.PixnetHappixPilot=new function(t,e){return{create:function(){var n=$e.getElementBySelector(t);on.setOptions(e),an();var i=on.getOptions().getVariant(),o=null;return"bar"===i?o=new oo(n).render():"bubble"===i&&(o=new po(n).render()),function t(){if(void 0!==(window.pix||{}).member_token){var e=on.getOptions().getDomainAppend();Ki.sendHappixAPI("get","".concat("https://happix-pilot-api.pixnet.cc").concat(e,"/pilot-data")).then((function(t){var e=t.pilot_content,n=e.weather,i=e.member_info,a=e.coupon,r=e.task,s=e.guide_message;(function(t){var e=on.getOptions();e.isIncludeGAScript()&&(rn(e.getTrackingId()),t&&cn(t)),e.isIncludePAScript()&&pn(e.getVenue(),t)})(i.member_uniqid),on.setOptions({memberUniqid:i.member_uniqid}),o&&o.setData(n,i,a,r,s)})).catch((function(t){console.log(t)}))}else setTimeout((function(){t()}),100)}(),o}}}("#pilot",{variant:fo,projectName:"blog",domainAppend:"",loginURL:uo+"://classic-panel.pixnet.cc"+pix.domain_append+"/login/openid?openid="+uo+"%3A%2F%2Fmember.pixnet.cc"+pix.domain_append+"%2Flogin&easy_login=1&done="+(encodeURIComponent(window.location.href)||"")+"&from_service=Blog",logoutURL:uo+"://classic-panel.pixnet.cc"+pix.domain_append+"/logout?done="+uo+"%3A%2F%2Fmember.pixnet.cc"+pix.domain_append+"%2Flogout%3Fdone%3D"+(encodeURIComponent(window.location.href)||""),ga:{isIncludeGAScript:!0,trackingId:"UA-408650-39"},pa:{isIncludePAScript:!0,venue:"pixnet"},style:{zIndex:{pilotZIndex:co?1e8:99999},width:{pilotWidth:960}}}).create()}();
